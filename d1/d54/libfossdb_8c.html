<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FOSSology: src/lib/c/libfossdb.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../fossology-logo.gif"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FOSSology
   &#160;<span id="projectnumber">4.6.0-rc1</span>
   </div>
   <div id="projectbrief">Open Source License Compliance by Open Source Software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d1/d54/libfossdb_8c.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">libfossdb.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Common libpq database functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;libfossdb.h&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for libfossdb.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d5f/libfossdb_8c__incl.png" border="0" usemap="#asrc_2lib_2c_2libfossdb_8c" alt=""/></div>
<map name="asrc_2lib_2c_2libfossdb_8c" id="asrc_2lib_2c_2libfossdb_8c">
<area shape="rect" title="Common libpq database functions." alt="" coords="338,5,485,32"/>
<area shape="rect" href="../../d2/d5f/libfossdb_8h_source.html" title=" " alt="" coords="323,80,417,107"/>
<area shape="rect" title=" " alt="" coords="587,155,657,181"/>
<area shape="rect" title=" " alt="" coords="5,155,76,181"/>
<area shape="rect" title=" " alt="" coords="101,155,167,181"/>
<area shape="rect" title=" " alt="" coords="192,155,260,181"/>
<area shape="rect" title=" " alt="" coords="285,155,359,181"/>
<area shape="rect" title=" " alt="" coords="384,155,455,181"/>
<area shape="rect" title=" " alt="" coords="479,155,563,181"/>
</map>
</div>
</div>
<p><a href="../../d1/d54/libfossdb_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9da8f443752a4651fc79b725d556b2ec"><td class="memItemLeft" align="right" valign="top"><a id="a9da8f443752a4651fc79b725d556b2ec"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ERRBUFSIZE</b>&#160;&#160;&#160;11264</td></tr>
<tr class="separator:a9da8f443752a4651fc79b725d556b2ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2f352d470896d8c4cc8cd2a3fc03e176"><td class="memItemLeft" align="right" valign="top">PGconn *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d54/libfossdb_8c.html#a2f352d470896d8c4cc8cd2a3fc03e176">fo_dbconnect</a> (char *<a class="el" href="../../d2/de9/test__DBInsert_8c.html#a73f992d03a36cb2da7d0032e0d2832ba">DBConfFile</a>, char **ErrorBuf)</td></tr>
<tr class="memdesc:a2f352d470896d8c4cc8cd2a3fc03e176"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to a database. The default is Db.conf.  <a href="../../d1/d54/libfossdb_8c.html#a2f352d470896d8c4cc8cd2a3fc03e176">More...</a><br /></td></tr>
<tr class="separator:a2f352d470896d8c4cc8cd2a3fc03e176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a438acf56cee347de51d91e1afe2de97d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d54/libfossdb_8c.html#a438acf56cee347de51d91e1afe2de97d">fo_checkPQresult</a> (PGconn *<a class="el" href="../../df/d14/wget__agent_8c.html#a7444694163584e990af192a7b4f9dddc">pgConn</a>, PGresult *result, char *sql, char *FileID, int LineNumb)</td></tr>
<tr class="memdesc:a438acf56cee347de51d91e1afe2de97d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the result status of a postgres SELECT.  <a href="../../d1/d54/libfossdb_8c.html#a438acf56cee347de51d91e1afe2de97d">More...</a><br /></td></tr>
<tr class="separator:a438acf56cee347de51d91e1afe2de97d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96f242ea3b1154edba2105ac8b0943d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d54/libfossdb_8c.html#a96f242ea3b1154edba2105ac8b0943d2">fo_checkPQcommand</a> (PGconn *<a class="el" href="../../df/d14/wget__agent_8c.html#a7444694163584e990af192a7b4f9dddc">pgConn</a>, PGresult *result, char *sql, char *FileID, int LineNumb)</td></tr>
<tr class="memdesc:a96f242ea3b1154edba2105ac8b0943d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the result status of a postgres commands (not select) If an error occured, write the error to stdout.  <a href="../../d1/d54/libfossdb_8c.html#a96f242ea3b1154edba2105ac8b0943d2">More...</a><br /></td></tr>
<tr class="separator:a96f242ea3b1154edba2105ac8b0943d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ca4c2bd4fd5dda094104e218f6a5385"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d54/libfossdb_8c.html#a8ca4c2bd4fd5dda094104e218f6a5385">fo_tableExists</a> (PGconn *<a class="el" href="../../df/d14/wget__agent_8c.html#a7444694163584e990af192a7b4f9dddc">pgConn</a>, const char *tableName)</td></tr>
<tr class="memdesc:a8ca4c2bd4fd5dda094104e218f6a5385"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if table exists. Note, this assumes the database name is 'fossology'.  <a href="../../d1/d54/libfossdb_8c.html#a8ca4c2bd4fd5dda094104e218f6a5385">More...</a><br /></td></tr>
<tr class="separator:a8ca4c2bd4fd5dda094104e218f6a5385"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Common libpq database functions. </p>

<p class="definition">Definition in file <a class="el" href="../../d1/d54/libfossdb_8c_source.html">libfossdb.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a96f242ea3b1154edba2105ac8b0943d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96f242ea3b1154edba2105ac8b0943d2">&#9670;&nbsp;</a></span>fo_checkPQcommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fo_checkPQcommand </td>
          <td>(</td>
          <td class="paramtype">PGconn *&#160;</td>
          <td class="paramname"><em>pgConn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PGresult *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>sql</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>FileID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>LineNumb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check the result status of a postgres commands (not select) If an error occured, write the error to stdout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgConn</td><td>Database connection object </td></tr>
    <tr><td class="paramname">result</td><td>Postgres result object </td></tr>
    <tr><td class="paramname">sql</td><td>the sql query </td></tr>
    <tr><td class="paramname">FileID</td><td>is a file identifier string to write into the error message. Typically the caller will use <b>FILE</b>, but any identifier string is ok. </td></tr>
    <tr><td class="paramname">LineNumb</td><td>the line number of the caller (<b>LINE</b>)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on OK, -1 on failure. On failure, result will be freed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d54/libfossdb_8c_source.html#l00204">204</a> of file <a class="el" href="../../d1/d54/libfossdb_8c_source.html">libfossdb.c</a>.</p>

</div>
</div>
<a id="a438acf56cee347de51d91e1afe2de97d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a438acf56cee347de51d91e1afe2de97d">&#9670;&nbsp;</a></span>fo_checkPQresult()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fo_checkPQresult </td>
          <td>(</td>
          <td class="paramtype">PGconn *&#160;</td>
          <td class="paramname"><em>pgConn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PGresult *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>sql</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>FileID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>LineNumb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check the result status of a postgres SELECT. </p>
<p>If an error occured, write the error to stdout</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgConn</td><td>Database connection object </td></tr>
    <tr><td class="paramname">result</td><td>Postgres result object </td></tr>
    <tr><td class="paramname">sql</td><td>the sql query </td></tr>
    <tr><td class="paramname">FileID</td><td>is a file identifier string to write into the error message. Typically the caller will use <b>FILE</b>, but any identifier string is ok. </td></tr>
    <tr><td class="paramname">LineNumb</td><td>the line number of the caller (<b>LINE</b>)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on OK, -1 on failure. On failure, result will be freed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d54/libfossdb_8c_source.html#l00170">170</a> of file <a class="el" href="../../d1/d54/libfossdb_8c_source.html">libfossdb.c</a>.</p>

</div>
</div>
<a id="a2f352d470896d8c4cc8cd2a3fc03e176"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f352d470896d8c4cc8cd2a3fc03e176">&#9670;&nbsp;</a></span>fo_dbconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PGconn* fo_dbconnect </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>DBConfFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>ErrorBuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connect to a database. The default is Db.conf. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">DBConfFile</td><td><a class="el" href="../../d6/d88/structFile.html">File</a> path of the Db.conf file to use. If NULL, use the default Db.conf </td></tr>
    <tr><td class="paramname">ErrorBuf</td><td>Address of pointer to error buffer. fo_dbconnect will allocate this if needed. The caller should free it.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PGconn*, or NULL on failure to process the config file. If NULL, ErrorBuff will contain the error message. If NULL is returned and ErrorBuf is NULL, then there was insufficient memory to allocate ErrorBuf. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d54/libfossdb_8c_source.html#l00029">29</a> of file <a class="el" href="../../d1/d54/libfossdb_8c_source.html">libfossdb.c</a>.</p>

</div>
</div>
<a id="a8ca4c2bd4fd5dda094104e218f6a5385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ca4c2bd4fd5dda094104e218f6a5385">&#9670;&nbsp;</a></span>fo_tableExists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fo_tableExists </td>
          <td>(</td>
          <td class="paramtype">PGconn *&#160;</td>
          <td class="paramname"><em>pgConn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tableName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if table exists. Note, this assumes the database name is 'fossology'. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pgConn</td><td>database connection </td></tr>
    <tr><td class="paramname">tableName</td><td>The table in question</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if table exists, 0 on error (which is logged) or if table does not exist. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/d54/libfossdb_8c_source.html#l00232">232</a> of file <a class="el" href="../../d1/d54/libfossdb_8c_source.html">libfossdb.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_c85d3e3c5052e9ad9ce18c6863244a25.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_d402d1f562af9f1e0306dced295da586.html">c</a></li><li class="navelem"><a class="el" href="../../d1/d54/libfossdb_8c.html">libfossdb.c</a></li>
    <li class="footer">Generated on Wed Oct 29 2025 10:31:31 for FOSSology by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
