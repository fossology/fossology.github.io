<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FOSSology: src/www/ui/admin-tag-manage.php Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../fossology-logo.gif"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FOSSology
   &#160;<span id="projectnumber">4.6.0</span>
   </div>
   <div id="projectbrief">Open Source License Compliance by Open Source Software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d6/d37/admin-tag-manage_8php_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">admin-tag-manage.php</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?php</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> SPDX-FileCopyrightText: Â© 2012-2013 Hewlett-Packard Development Company, L.P.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> SPDX-License-Identifier: GPL-2.0-only</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;use <a class="code" href="../../d9/d99/classFossology_1_1Lib_1_1Auth_1_1Auth.html">Fossology\Lib\Auth\Auth</a>;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;define(<span class="stringliteral">&quot;TITLE_ADMIN_TAG_MANAGE&quot;</span>, _(<span class="stringliteral">&quot;Enable/Disable Tag Display&quot;</span>));</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="../../df/d64/classadmin__tag__manage.html">   17</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../df/d64/classadmin__tag__manage.html">admin_tag_manage</a> <span class="keyword">extends</span> <a class="code" href="../../d7/d54/classFO__Plugin.html">FO_Plugin</a></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;{</div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="../../df/d64/classadmin__tag__manage.html#ab86ea0a2b6e2dfd22cff5feef7cd226d">   19</a></span>&#160;  <span class="keyword">function</span> <a class="code" href="../../df/d64/classadmin__tag__manage.html#ab86ea0a2b6e2dfd22cff5feef7cd226d">__construct</a>()</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  {</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    $this-&gt;Name       = <span class="stringliteral">&quot;admin_tag_manage&quot;</span>;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    $this-&gt;Title      = TITLE_ADMIN_TAG_MANAGE;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    $this-&gt;MenuList = <span class="stringliteral">&quot;Admin::Tag::Enable/Disable Tag&quot;</span>;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    $this-&gt;Version = <span class="stringliteral">&quot;1.3&quot;</span>;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    $this-&gt;DBaccess = <a class="code" href="../../d8/d3b/libfossology_8h.html#aea9d2878cd65870348c15ddd09bc833f">PLUGIN_DB_ADMIN</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    parent::__construct();</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  }</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="../../df/d64/classadmin__tag__manage.html#a23a17e836f02ca175cab4c187d975959">   39</a></span>&#160;  <span class="keyword">function</span> <a class="code" href="../../df/d64/classadmin__tag__manage.html#a23a17e836f02ca175cab4c187d975959">ManageTag</a>($folder_id, $upload_id, $manage)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    global <a class="code" href="../../dd/db8/list__license_8php.html#ab89d72b94c948293669fcf840b371f75">$PG_CONN</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">if</span> (empty($manage)) {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    }</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">if</span> (empty($folder_id) &amp;&amp; empty($upload_id)) {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    $upload_list = array();</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span> (!empty($upload_id)) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      $upload_list[0] = array(<span class="stringliteral">&#39;upload_pk&#39;</span>=&gt;$upload_id);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      $upload_list = <a class="code" href="../../d0/d8d/common-folders_8php.html#a5ff9fafea4009c615eefa6af1ecefbef">FolderListUploadsRecurse</a>($folder_id, NULL, <a class="code" href="../../d8/d3b/libfossology_8h.html#a386241abb1ca8b97e859286f4538f3c8">Auth::PERM_WRITE</a>); <span class="comment">// want to manage all uploads under a folder</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">foreach</span> ($upload_list as $upload) {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      $upload_id = $upload[<span class="stringliteral">&#39;upload_pk&#39;</span>];</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      <span class="keywordflow">if</span> (<span class="stringliteral">&quot;Enable&quot;</span> === $manage) {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        $manage_value = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        $manage_value = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      $sql = <span class="stringliteral">&quot;select * from tag_manage where upload_fk = $upload_id and is_disabled = true;&quot;</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      $result = pg_query(<a class="code" href="../../dd/db8/list__license_8php.html#ab89d72b94c948293669fcf840b371f75">$PG_CONN</a>, $sql);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <a class="code" href="../../db/d01/common-db_8php.html#a7e6950ae561e9bd326f2edbe28654b30">DBCheckResult</a>($result, $sql, __FILE__, __LINE__);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      $count = pg_num_rows($result);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      pg_free_result($result);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      <span class="keywordflow">if</span> (empty($count) &amp;&amp; $manage_value == <span class="keyword">true</span>) { <span class="comment">// has not been disabled, and want to disable this upload</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        $sql = <span class="stringliteral">&quot;INSERT INTO tag_manage(upload_fk, is_disabled) VALUES($upload_id, true);&quot;</span>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        $result = pg_query(<a class="code" href="../../dd/db8/list__license_8php.html#ab89d72b94c948293669fcf840b371f75">$PG_CONN</a>, $sql);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="../../db/d01/common-db_8php.html#a7e6950ae561e9bd326f2edbe28654b30">DBCheckResult</a>($result, $sql, __FILE__, __LINE__);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        pg_free_result($result);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($count == 1 &amp;&amp; $manage_value == <span class="keyword">false</span>) { <span class="comment">// has been disabled, and want to enable this upload</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        $sql = <span class="stringliteral">&quot;delete from tag_manage where upload_fk = $upload_id;&quot;</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        $result = pg_query(<a class="code" href="../../dd/db8/list__license_8php.html#ab89d72b94c948293669fcf840b371f75">$PG_CONN</a>, $sql);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <a class="code" href="../../db/d01/common-db_8php.html#a7e6950ae561e9bd326f2edbe28654b30">DBCheckResult</a>($result, $sql, __FILE__, __LINE__);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        pg_free_result($result);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="../../df/d64/classadmin__tag__manage.html#a97310b456e2e9d6be82321f515fd953c">   90</a></span>&#160;  <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="../../df/d64/classadmin__tag__manage.html#a97310b456e2e9d6be82321f515fd953c">Output</a>()</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    $V=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    $upload_id = <a class="code" href="../../d7/dd7/common-parm_8php.html#ab4929cf27a6f44eea4f9e1dff06fafb3">GetParm</a>(<span class="stringliteral">&#39;upload&#39;</span>, <a class="code" href="../../d7/dd7/common-parm_8php.html#a584bccac97931010f0362d184ce5d12f">PARM_INTEGER</a>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    $manage = <a class="code" href="../../d7/dd7/common-parm_8php.html#ab4929cf27a6f44eea4f9e1dff06fafb3">GetParm</a>(<span class="stringliteral">&#39;manage&#39;</span>, <a class="code" href="../../d7/dd7/common-parm_8php.html#a1b9ca3c738abc63c7bef491a06b7f8c3">PARM_TEXT</a>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">/* If this is a POST, then process the request. */</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    $Folder = <a class="code" href="../../d7/dd7/common-parm_8php.html#ab4929cf27a6f44eea4f9e1dff06fafb3">GetParm</a>(<span class="stringliteral">&#39;folder&#39;</span>,<a class="code" href="../../d7/dd7/common-parm_8php.html#a584bccac97931010f0362d184ce5d12f">PARM_INTEGER</a>);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span> (empty($Folder)) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      $Folder = <a class="code" href="../../d0/d8d/common-folders_8php.html#a8c34189d7e63382a96f23a2687edf66c">FolderGetTop</a>();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    $rc = $this-&gt;<a class="code" href="../../df/d64/classadmin__tag__manage.html#a23a17e836f02ca175cab4c187d975959">ManageTag</a>($Folder, $upload_id, $manage);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">if</span> (1 == $rc) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      $text1 = _(<span class="stringliteral">&quot;all uploads in folder&quot;</span>);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      $text2 = _(<span class="stringliteral">&quot;in folder&quot;</span>);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      $folder_path = <a class="code" href="../../d0/d8d/common-folders_8php.html#a28addbf25c2ef89a103626f26602b237">FolderGetName</a>($Folder);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      $upload_name = <a class="code" href="../../de/d10/common-ui_8php.html#abfe8dae862e37b6c80d8666b1186a5e2">GetUploadName</a>($upload_id);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keywordflow">if</span> (empty($upload_id)) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        $text = $text1;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        $text = <span class="stringliteral">&quot;&#39;$upload_name&#39; $text2&quot;</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      $Msg = <span class="stringliteral">&quot;$manage $text &#39;$folder_path&#39;&quot;</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      $this-&gt;vars[<span class="stringliteral">&#39;message&#39;</span>] = $Msg;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="comment">// reset form fields</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    $V .= <a class="code" href="../../de/d32/common-active_8php.html#afee06a825ef519c3687997c133935f23">ActiveHTTPscript</a>(<span class="stringliteral">&quot;Uploads&quot;</span>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;script language=&#39;javascript&#39;&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    $V .= <span class="stringliteral">&quot;function Uploads_Reply()\n&quot;</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    $V .= <span class="stringliteral">&quot;  {\n&quot;</span>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    $V .= <span class="stringliteral">&quot;  if ((Uploads.readyState==4) &amp;&amp; (Uploads.status==200))\n&quot;</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    $V .= <span class="stringliteral">&quot;    {\n&quot;</span>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    $V .= <span class="stringliteral">&quot;    document.getElementById(&#39;tagdiv&#39;).innerHTML = &#39;&lt;select size=\&#39;10\&#39; name=\&#39;upload\&#39; onChange=\&#39;Tagging_Get(\&quot;&quot;</span> . <a class="code" href="../../d7/dd7/common-parm_8php.html#a08b950045b2e0adb32507b4b48a02320">Traceback_uri</a>() . <span class="stringliteral">&quot;?mod=upload_tagging&amp;upload=\&quot; + this.value)\&#39;&gt;&#39; + Uploads.responseText+ &#39;&lt;/select&gt;&lt;P/&gt;&#39;;\n&quot;</span>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    $V .= <span class="stringliteral">&quot;    document.getElementById(&#39;manage_tag&#39;).style.display= &#39;none&#39;;\n&quot;</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    $V .= <span class="stringliteral">&quot;    document.getElementById(&#39;manage_tag_all&#39;).style.display= &#39;block&#39;;\n&quot;</span>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    $V .= <span class="stringliteral">&quot;    }\n&quot;</span>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    $V .= <span class="stringliteral">&quot;  }\n&quot;</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;/script&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    $V .= <a class="code" href="../../de/d32/common-active_8php.html#afee06a825ef519c3687997c133935f23">ActiveHTTPscript</a>(<span class="stringliteral">&quot;Tagging&quot;</span>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;script language=&#39;javascript&#39;&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    $V .= <span class="stringliteral">&quot;function Tagging_Reply()\n&quot;</span>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    $V .= <span class="stringliteral">&quot;  {\n&quot;</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    $V .= <span class="stringliteral">&quot;  if ((Tagging.readyState==4) &amp;&amp; (Tagging.status==200))\n&quot;</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    $V .= <span class="stringliteral">&quot;    {\n&quot;</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    $V .= <span class="stringliteral">&quot;    document.getElementById(&#39;manage_tag_all&#39;).style.display= &#39;none&#39;;\n&quot;</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    $V .= <span class="stringliteral">&quot;    document.getElementById(&#39;manage_tag&#39;).style.display= &#39;block&#39;;\n&quot;</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    $V .= <span class="stringliteral">&quot;    document.getElementById(&#39;manage_tag&#39;).innerHTML = Tagging.responseText;\n&quot;</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    $V .= <span class="stringliteral">&quot;    }\n&quot;</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    $V .= <span class="stringliteral">&quot;  }\n&quot;</span>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;/script&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;form name=&#39;formy&#39; method=&#39;post&#39;&gt;\n&quot;</span>; <span class="comment">// no url = this url</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    $V .= _(<span class="stringliteral">&quot;Displaying tags while browsing can be slow for large uploads.  This interface allows you to select an upload to disable (or enable) the tag display.  By default the tag display is enabled.&lt;p&gt;\n&quot;</span>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;ol&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    $text = _(<span class="stringliteral">&quot;Select the folder containing the upload you wish to enable/disable:&quot;</span>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;li&gt;$text&lt;br&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;select name=&#39;folder&#39;\n&quot;</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    $V .= <span class="stringliteral">&quot;onLoad=&#39;Uploads_Get((\&quot;&quot;</span> . <a class="code" href="../../d7/dd7/common-parm_8php.html#a08b950045b2e0adb32507b4b48a02320">Traceback_uri</a>() . <span class="stringliteral">&quot;?mod=upload_options&amp;folder=$Folder&#39; &quot;</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    $V .= <span class="stringliteral">&quot;onChange=&#39;Uploads_Get(\&quot;&quot;</span> . <a class="code" href="../../d7/dd7/common-parm_8php.html#a08b950045b2e0adb32507b4b48a02320">Traceback_uri</a>() . <span class="stringliteral">&quot;?mod=upload_options&amp;folder=\&quot; + this.value)&#39; &quot;</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    $V .= <span class="stringliteral">&quot;class=&#39;ui-render-select2&#39;&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    $V .= <a class="code" href="../../d0/d8d/common-folders_8php.html#a379fb96a286bf8b6e8b19520a0e03dec">FolderListOption</a>(-1,0,1,$Folder);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;/select&gt;&lt;P /&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    $text = _(<span class="stringliteral">&quot;Select the upload to  enable/disable:&quot;</span>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;li&gt;$text&lt;br&gt;&quot;</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;div id=&#39;tagdiv&#39;&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;select size=&#39;10&#39; name=&#39;upload&#39; onChange=&#39;Tagging_Get(\&quot;&quot;</span> . <a class="code" href="../../d7/dd7/common-parm_8php.html#a08b950045b2e0adb32507b4b48a02320">Traceback_uri</a>() . <span class="stringliteral">&quot;?mod=upload_tagging&amp;upload=\&quot; + this.value)&#39;&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    $List = <a class="code" href="../../d0/d8d/common-folders_8php.html#afcbc1c0d48e4bf48e6713c39ac446859">FolderListUploads_perm</a>($Folder, <a class="code" href="../../d8/d3b/libfossology_8h.html#a386241abb1ca8b97e859286f4538f3c8">Auth::PERM_WRITE</a>);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">foreach</span> ($List as $L) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      $V .= <span class="stringliteral">&quot;&lt;option value=&#39;&quot;</span> . $L[<span class="stringliteral">&#39;upload_pk&#39;</span>] . <span class="stringliteral">&quot;&#39;&gt;&quot;</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      $V .= htmlentities($L[<span class="stringliteral">&#39;name&#39;</span>]);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">if</span> (! empty($L[<span class="stringliteral">&#39;upload_desc&#39;</span>])) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        $V .= <span class="stringliteral">&quot; (&quot;</span> . htmlentities($L[<span class="stringliteral">&#39;upload_desc&#39;</span>]) . <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      $V .= <span class="stringliteral">&quot;&lt;/option&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;/select&gt;&lt;P /&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;/div&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;div id=&#39;manage_tag_all&#39;&gt;&quot;</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    $text = _(<span class="stringliteral">&quot;Disable&quot;</span>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;input type=&#39;submit&#39; name=&#39;manage&#39;  value=&#39;$text&#39;&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    $text = _(<span class="stringliteral">&quot;Enable&quot;</span>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;input type=&#39;submit&#39; name=&#39;manage&#39; value=&#39;$text&#39;&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    $V .=  <span class="stringliteral">&quot;&lt;/div&gt;&quot;</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    $V .= <span class="stringliteral">&quot;&lt;div id=&#39;manage_tag&#39;&gt;&quot;</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    $V .=  <span class="stringliteral">&quot;&lt;/div&gt;&quot;</span>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">return</span> $V;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;$NewPlugin = <span class="keyword">new</span> <a class="code" href="../../df/d64/classadmin__tag__manage.html">admin_tag_manage</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;$NewPlugin-&gt;Initialize();</div>
<div class="ttc" id="aclassFO__Plugin_html"><div class="ttname"><a href="../../d7/d54/classFO__Plugin.html">FO_Plugin</a></div><div class="ttdoc">This is the Plugin class. All plugins should:</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d1c/FO__Plugin_8php_source.html#l00056">FO_Plugin.php:57</a></div></div>
<div class="ttc" id="aclassFossology_1_1Lib_1_1Auth_1_1Auth_html"><div class="ttname"><a href="../../d9/d99/classFossology_1_1Lib_1_1Auth_1_1Auth.html">Fossology\Lib\Auth\Auth</a></div><div class="ttdoc">Contains the constants and helpers for authentication of user.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbd/Auth_8php_source.html#l00023">Auth.php:24</a></div></div>
<div class="ttc" id="aclassadmin__tag__manage_html"><div class="ttname"><a href="../../df/d64/classadmin__tag__manage.html">admin_tag_manage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/admin-tag-manage_8php_source.html#l00017">admin-tag-manage.php:18</a></div></div>
<div class="ttc" id="aclassadmin__tag__manage_html_a23a17e836f02ca175cab4c187d975959"><div class="ttname"><a href="../../df/d64/classadmin__tag__manage.html#a23a17e836f02ca175cab4c187d975959">admin_tag_manage\ManageTag</a></div><div class="ttdeci">ManageTag($folder_id, $upload_id, $manage)</div><div class="ttdoc">Enable/Disable Tag on one folder(all uploads under this folder) or one upload.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/admin-tag-manage_8php_source.html#l00039">admin-tag-manage.php:39</a></div></div>
<div class="ttc" id="aclassadmin__tag__manage_html_a97310b456e2e9d6be82321f515fd953c"><div class="ttname"><a href="../../df/d64/classadmin__tag__manage.html#a97310b456e2e9d6be82321f515fd953c">admin_tag_manage\Output</a></div><div class="ttdeci">Output()</div><div class="ttdoc">This function is called when user output is requested. This function is responsible for content....</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/admin-tag-manage_8php_source.html#l00090">admin-tag-manage.php:90</a></div></div>
<div class="ttc" id="aclassadmin__tag__manage_html_ab86ea0a2b6e2dfd22cff5feef7cd226d"><div class="ttname"><a href="../../df/d64/classadmin__tag__manage.html#ab86ea0a2b6e2dfd22cff5feef7cd226d">admin_tag_manage\__construct</a></div><div class="ttdeci">__construct()</div><div class="ttdoc">base constructor. Most plugins will just use this</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/admin-tag-manage_8php_source.html#l00019">admin-tag-manage.php:19</a></div></div>
<div class="ttc" id="acommon-active_8php_html_afee06a825ef519c3687997c133935f23"><div class="ttname"><a href="../../de/d32/common-active_8php.html#afee06a825ef519c3687997c133935f23">ActiveHTTPscript</a></div><div class="ttdeci">ActiveHTTPscript($RequestName, $IncludeScriptTags=1)</div><div class="ttdoc">Given a function name, create the JavaScript needed for doing the request.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d32/common-active_8php_source.html#l00089">common-active.php:89</a></div></div>
<div class="ttc" id="acommon-db_8php_html_a7e6950ae561e9bd326f2edbe28654b30"><div class="ttname"><a href="../../db/d01/common-db_8php.html#a7e6950ae561e9bd326f2edbe28654b30">DBCheckResult</a></div><div class="ttdeci">DBCheckResult($result, $sql, $filenm, $lineno)</div><div class="ttdoc">Check the postgres result for unexpected errors. If found, treat them as fatal.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d01/common-db_8php_source.html#l00187">common-db.php:187</a></div></div>
<div class="ttc" id="acommon-folders_8php_html_a28addbf25c2ef89a103626f26602b237"><div class="ttname"><a href="../../d0/d8d/common-folders_8php.html#a28addbf25c2ef89a103626f26602b237">FolderGetName</a></div><div class="ttdeci">FolderGetName($FolderPk, $Top=-1)</div><div class="ttdoc">Given a folder_pk, return the full path to this folder.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8d/common-folders_8php_source.html#l00263">common-folders.php:263</a></div></div>
<div class="ttc" id="acommon-folders_8php_html_a379fb96a286bf8b6e8b19520a0e03dec"><div class="ttname"><a href="../../d0/d8d/common-folders_8php.html#a379fb96a286bf8b6e8b19520a0e03dec">FolderListOption</a></div><div class="ttdeci">FolderListOption($ParentFolder, $Depth, $IncludeTop=1, $SelectId=-1, $linkParent=false, $OldParent=0)</div><div class="ttdoc">Create the folder tree, using OPTION tags.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8d/common-folders_8php_source.html#l00178">common-folders.php:178</a></div></div>
<div class="ttc" id="acommon-folders_8php_html_a5ff9fafea4009c615eefa6af1ecefbef"><div class="ttname"><a href="../../d0/d8d/common-folders_8php.html#a5ff9fafea4009c615eefa6af1ecefbef">FolderListUploadsRecurse</a></div><div class="ttdeci">FolderListUploadsRecurse($ParentFolder=-1, $FolderPath='', $perm=Auth::PERM_READ)</div><div class="ttdoc">Get uploads and folder info, starting from $ParentFolder.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8d/common-folders_8php_source.html#l00428">common-folders.php:428</a></div></div>
<div class="ttc" id="acommon-folders_8php_html_a8c34189d7e63382a96f23a2687edf66c"><div class="ttname"><a href="../../d0/d8d/common-folders_8php.html#a8c34189d7e63382a96f23a2687edf66c">FolderGetTop</a></div><div class="ttdeci">FolderGetTop()</div><div class="ttdoc">DEPRECATED! Find the top-of-tree folder_pk for the current user.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8d/common-folders_8php_source.html#l00026">common-folders.php:26</a></div></div>
<div class="ttc" id="acommon-folders_8php_html_afcbc1c0d48e4bf48e6713c39ac446859"><div class="ttname"><a href="../../d0/d8d/common-folders_8php.html#afcbc1c0d48e4bf48e6713c39ac446859">FolderListUploads_perm</a></div><div class="ttdeci">FolderListUploads_perm($ParentFolder, $perm)</div><div class="ttdoc">Returns an array of uploads in a folder.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8d/common-folders_8php_source.html#l00361">common-folders.php:361</a></div></div>
<div class="ttc" id="acommon-parm_8php_html_a08b950045b2e0adb32507b4b48a02320"><div class="ttname"><a href="../../d7/dd7/common-parm_8php.html#a08b950045b2e0adb32507b4b48a02320">Traceback_uri</a></div><div class="ttdeci">Traceback_uri()</div><div class="ttdoc">Get the URI without query to this location.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/common-parm_8php_source.html#l00097">common-parm.php:97</a></div></div>
<div class="ttc" id="acommon-parm_8php_html_a1b9ca3c738abc63c7bef491a06b7f8c3"><div class="ttname"><a href="../../d7/dd7/common-parm_8php.html#a1b9ca3c738abc63c7bef491a06b7f8c3">PARM_TEXT</a></div><div class="ttdeci">const PARM_TEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/common-parm_8php_source.html#l00020">common-parm.php:20</a></div></div>
<div class="ttc" id="acommon-parm_8php_html_a584bccac97931010f0362d184ce5d12f"><div class="ttname"><a href="../../d7/dd7/common-parm_8php.html#a584bccac97931010f0362d184ce5d12f">PARM_INTEGER</a></div><div class="ttdeci">const PARM_INTEGER</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/common-parm_8php_source.html#l00014">common-parm.php:14</a></div></div>
<div class="ttc" id="acommon-parm_8php_html_ab4929cf27a6f44eea4f9e1dff06fafb3"><div class="ttname"><a href="../../d7/dd7/common-parm_8php.html#ab4929cf27a6f44eea4f9e1dff06fafb3">GetParm</a></div><div class="ttdeci">GetParm($parameterName, $parameterType)</div><div class="ttdoc">This function will retrieve the variables and check data types.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/common-parm_8php_source.html#l00046">common-parm.php:46</a></div></div>
<div class="ttc" id="acommon-ui_8php_html_abfe8dae862e37b6c80d8666b1186a5e2"><div class="ttname"><a href="../../de/d10/common-ui_8php.html#abfe8dae862e37b6c80d8666b1186a5e2">GetUploadName</a></div><div class="ttdeci">GetUploadName($upload_pk)</div><div class="ttdoc">Get Upload Name through upload id.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d10/common-ui_8php_source.html#l00251">common-ui.php:251</a></div></div>
<div class="ttc" id="alibfossology_8h_html_a386241abb1ca8b97e859286f4538f3c8"><div class="ttname"><a href="../../d8/d3b/libfossology_8h.html#a386241abb1ca8b97e859286f4538f3c8">PERM_WRITE</a></div><div class="ttdeci">#define PERM_WRITE</div><div class="ttdoc">Read-Write permission.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3b/libfossology_8h_source.html#l00033">libfossology.h:33</a></div></div>
<div class="ttc" id="alibfossology_8h_html_aea9d2878cd65870348c15ddd09bc833f"><div class="ttname"><a href="../../d8/d3b/libfossology_8h.html#aea9d2878cd65870348c15ddd09bc833f">PLUGIN_DB_ADMIN</a></div><div class="ttdeci">#define PLUGIN_DB_ADMIN</div><div class="ttdoc">Plugin requires admin level permission on DB.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3b/libfossology_8h_source.html#l00039">libfossology.h:39</a></div></div>
<div class="ttc" id="alist__license_8php_html_ab89d72b94c948293669fcf840b371f75"><div class="ttname"><a href="../../dd/db8/list__license_8php.html#ab89d72b94c948293669fcf840b371f75">$PG_CONN</a></div><div class="ttdeci">foreach($Options as $Option=&gt; $OptVal) if(0==$reference_flag &amp;&amp;0==$nomos_flag) $PG_CONN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/db8/list__license_8php_source.html#l00050">list_license.php:50</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_8459beec082c9a1ee319a4b49e1c1815.html">www</a></li><li class="navelem"><a class="el" href="../../dir_3ab7bcf860d6ea450e4ba0763f924012.html">ui</a></li><li class="navelem"><b>admin-tag-manage.php</b></li>
    <li class="footer">Generated on Fri Feb 20 2026 09:25:15 for FOSSology by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
