<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FOSSology: install/db/dbmigrate_3.6-3.7.php File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../fossology-logo.gif"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FOSSology
   &#160;<span id="projectnumber">4.6.0-rc1</span>
   </div>
   <div id="projectbrief">Open Source License Compliance by Open Source Software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d6/dd7/dbmigrate__3_86-3_87_8php.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dbmigrate_3.6-3.7.php File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Migrate DB from release 3.6.0 to 3.7.0 with new obligation fixes.  
<a href="#details">More...</a></p>

<p><a href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5d43f53a1fac79a64fb5d9e4a9fbe613"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php.html#a5d43f53a1fac79a64fb5d9e4a9fbe613">moveCandidateLicenseMap</a> ($<a class="el" href="../../da/d32/mimetype_2agent__tests_2Unit_2testRun_8c.html#a58f81024cfbdb0a8b80798dbd5b202e2">dbManager</a>, $obPk, $<a class="el" href="../../d3/dd1/scheduler_2agent_2scheduler_8h.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a>)</td></tr>
<tr class="memdesc:a5d43f53a1fac79a64fb5d9e4a9fbe613"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move licenses from obligation map to obligation candidate map.  <a href="../../d6/dd7/dbmigrate__3_86-3_87_8php.html#a5d43f53a1fac79a64fb5d9e4a9fbe613">More...</a><br /></td></tr>
<tr class="separator:a5d43f53a1fac79a64fb5d9e4a9fbe613"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99dfadb88ed46d2ebf1a2f892da7f944"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php.html#a99dfadb88ed46d2ebf1a2f892da7f944">checkMigrate3637Required</a> ($<a class="el" href="../../da/d32/mimetype_2agent__tests_2Unit_2testRun_8c.html#a58f81024cfbdb0a8b80798dbd5b202e2">dbManager</a>)</td></tr>
<tr class="separator:a99dfadb88ed46d2ebf1a2f892da7f944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae515d98f1a5cda6a77684ac67490680a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php.html#ae515d98f1a5cda6a77684ac67490680a">getLicConObligationMigrate</a> ($<a class="el" href="../../da/d32/mimetype_2agent__tests_2Unit_2testRun_8c.html#a58f81024cfbdb0a8b80798dbd5b202e2">dbManager</a>)</td></tr>
<tr class="separator:ae515d98f1a5cda6a77684ac67490680a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f05e4bfe3e4c3530a7ac22798c07d15"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php.html#a8f05e4bfe3e4c3530a7ac22798c07d15">moveObligation</a> ($<a class="el" href="../../da/d32/mimetype_2agent__tests_2Unit_2testRun_8c.html#a58f81024cfbdb0a8b80798dbd5b202e2">dbManager</a>, $<a class="el" href="../../d3/dd1/scheduler_2agent_2scheduler_8h.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a>)</td></tr>
<tr class="memdesc:a8f05e4bfe3e4c3530a7ac22798c07d15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all obligations and move licenses.  <a href="../../d6/dd7/dbmigrate__3_86-3_87_8php.html#a8f05e4bfe3e4c3530a7ac22798c07d15">More...</a><br /></td></tr>
<tr class="separator:a8f05e4bfe3e4c3530a7ac22798c07d15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6d66bc9225c53af7c737f3fc03e103c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php.html#ac6d66bc9225c53af7c737f3fc03e103c">migrateReuseValueForEnhanceWithMainLicense</a> ($<a class="el" href="../../da/d32/mimetype_2agent__tests_2Unit_2testRun_8c.html#a58f81024cfbdb0a8b80798dbd5b202e2">dbManager</a>)</td></tr>
<tr class="separator:ac6d66bc9225c53af7c737f3fc03e103c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86472a4d3f13973fabd96f36b4063bd9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php.html#a86472a4d3f13973fabd96f36b4063bd9">removeNonConcLicensesFromObligation</a> ($<a class="el" href="../../da/d32/mimetype_2agent__tests_2Unit_2testRun_8c.html#a58f81024cfbdb0a8b80798dbd5b202e2">dbManager</a>, $migrationData)</td></tr>
<tr class="memdesc:a86472a4d3f13973fabd96f36b4063bd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove identified licenses from obligations.  <a href="../../d6/dd7/dbmigrate__3_86-3_87_8php.html#a86472a4d3f13973fabd96f36b4063bd9">More...</a><br /></td></tr>
<tr class="separator:a86472a4d3f13973fabd96f36b4063bd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f8c776bb7648e3db4f1d7c956a5997c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php.html#a0f8c776bb7648e3db4f1d7c956a5997c">Migrate_36_37</a> ($<a class="el" href="../../da/d32/mimetype_2agent__tests_2Unit_2testRun_8c.html#a58f81024cfbdb0a8b80798dbd5b202e2">dbManager</a>, $<a class="el" href="../../d3/dd1/scheduler_2agent_2scheduler_8h.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a>)</td></tr>
<tr class="separator:a0f8c776bb7648e3db4f1d7c956a5997c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Migrate DB from release 3.6.0 to 3.7.0 with new obligation fixes. </p>

<p class="definition">Definition in file <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html">dbmigrate_3.6-3.7.php</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a99dfadb88ed46d2ebf1a2f892da7f944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99dfadb88ed46d2ebf1a2f892da7f944">&#9670;&nbsp;</a></span>checkMigrate3637Required()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">checkMigrate3637Required </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dbManager</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if migration is required. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">DbManager</td><td class="paramname">$dbManager</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean True if migration is required, false otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html#l00070">70</a> of file <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html">dbmigrate_3.6-3.7.php</a>.</p>

</div>
</div>
<a id="ae515d98f1a5cda6a77684ac67490680a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae515d98f1a5cda6a77684ac67490680a">&#9670;&nbsp;</a></span>getLicConObligationMigrate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getLicConObligationMigrate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dbManager</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the entries for which migration is required for non concluded licenses. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">DbManager</td><td class="paramname">$dbManager</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array Entries from which require migration </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html#l00107">107</a> of file <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html">dbmigrate_3.6-3.7.php</a>.</p>

</div>
</div>
<a id="a0f8c776bb7648e3db4f1d7c956a5997c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f8c776bb7648e3db4f1d7c956a5997c">&#9670;&nbsp;</a></span>Migrate_36_37()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Migrate_36_37 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dbManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$verbose</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Migration from FOSSology 3.6.0 to 3.7.0 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">DbManager</td><td class="paramname">$dbManager</td><td></td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$verbose</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html#l00229">229</a> of file <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html">dbmigrate_3.6-3.7.php</a>.</p>

</div>
</div>
<a id="ac6d66bc9225c53af7c737f3fc03e103c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6d66bc9225c53af7c737f3fc03e103c">&#9670;&nbsp;</a></span>migrateReuseValueForEnhanceWithMainLicense()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">migrateReuseValueForEnhanceWithMainLicense </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dbManager</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if Reuse value needs to be changed. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">DbManager</td><td class="paramname">$dbManager</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean True value 8 exist, false otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html#l00155">155</a> of file <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html">dbmigrate_3.6-3.7.php</a>.</p>

</div>
</div>
<a id="a5d43f53a1fac79a64fb5d9e4a9fbe613"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d43f53a1fac79a64fb5d9e4a9fbe613">&#9670;&nbsp;</a></span>moveCandidateLicenseMap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moveCandidateLicenseMap </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dbManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$obPk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$verbose</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move licenses from obligation map to obligation candidate map. </p>
<p>Remove licenses from obligation_map which are candidate license and add them to obligation_candidate_map. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">DbManager</td><td class="paramname">$dbManager</td><td>DB Manager to use </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$obPk</td><td>Obligation ID </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$verbose</td><td>Set TRUE to print verbose message </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer Number of entries deleted </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html#l00028">28</a> of file <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html">dbmigrate_3.6-3.7.php</a>.</p>

</div>
</div>
<a id="a8f05e4bfe3e4c3530a7ac22798c07d15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f05e4bfe3e4c3530a7ac22798c07d15">&#9670;&nbsp;</a></span>moveObligation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moveObligation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dbManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$verbose</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get all obligations and move licenses. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">DbManager</td><td class="paramname">$dbManager</td><td></td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$verbose</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html#l00136">136</a> of file <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html">dbmigrate_3.6-3.7.php</a>.</p>

</div>
</div>
<a id="a86472a4d3f13973fabd96f36b4063bd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86472a4d3f13973fabd96f36b4063bd9">&#9670;&nbsp;</a></span>removeNonConcLicensesFromObligation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">removeNonConcLicensesFromObligation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dbManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$migrationData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove identified licenses from obligations. </p>
<p>The function removes the obligation map sent from $migrationData. To do so, the function first gets the list of licenses along with their parent license. Then makes sure that the parent is part of the obligation to prevent data loss. Then it finally removes the obligation map. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">DbManager</td><td class="paramname">$dbManager</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$migrationData</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html#l00191">191</a> of file <a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php_source.html">dbmigrate_3.6-3.7.php</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_e3a4aa6ae53c85312025264fe419cff9.html">install</a></li><li class="navelem"><a class="el" href="../../dir_82a2cdd0e1f9b99dd3ea680b377b8d2c.html">db</a></li><li class="navelem"><a class="el" href="../../d6/dd7/dbmigrate__3_86-3_87_8php.html">dbmigrate_3.6-3.7.php</a></li>
    <li class="footer">Generated on Wed Oct 29 2025 10:31:30 for FOSSology by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
