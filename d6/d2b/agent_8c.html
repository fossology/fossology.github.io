<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FOSSology: src/scheduler/agent/agent.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../fossology-logo.gif"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FOSSology
   &#160;<span id="projectnumber">4.6.0-rc1</span>
   </div>
   <div id="projectbrief">Open Source License Compliance by Open Source Software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d6/d2b/agent_8c.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">agent.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains agent related information.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="../../de/d9e/agent_8h_source.html">agent.h</a>&gt;</code><br />
<code>#include &lt;database.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dd/d20/event_8h_source.html">event.h</a>&gt;</code><br />
<code>#include &lt;host.h&gt;</code><br />
<code>#include &lt;job.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d5/d77/logging_8h_source.html">logging.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d3/dd1/scheduler_2agent_2scheduler_8h_source.html">scheduler.h</a>&gt;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/wait.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;glib.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for agent.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/dcd/agent_8c__incl.png" border="0" usemap="#asrc_2scheduler_2agent_2agent_8c" alt=""/></div>
<map name="asrc_2scheduler_2agent_2agent_8c" id="asrc_2scheduler_2agent_2agent_8c">
<area shape="rect" title="Contains agent related information." alt="" coords="775,5,925,47"/>
<area shape="rect" href="../../de/d9e/agent_8h.html" title="Header file with agent related operations." alt="" coords="815,95,885,121"/>
<area shape="rect" href="../../df/ded/host_8h_source.html" title=" " alt="" coords="711,244,773,271"/>
<area shape="rect" href="../../d3/dd1/scheduler_2agent_2scheduler_8h.html" title="Header file for the scheduler." alt="" coords="575,319,671,345"/>
<area shape="rect" href="../../d5/d77/logging_8h.html" title="Log related operations." alt="" coords="378,393,461,420"/>
<area shape="rect" title=" " alt="" coords="105,468,171,495"/>
<area shape="rect" title=" " alt="" coords="5,468,76,495"/>
<area shape="rect" title=" " alt="" coords="775,468,845,495"/>
<area shape="rect" title=" " alt="" coords="909,468,967,495"/>
<area shape="rect" title=" " alt="" coords="1015,393,1085,420"/>
<area shape="rect" href="../../d3/d6a/job_8h_source.html" title=" " alt="" coords="461,169,516,196"/>
<area shape="rect" href="../../dd/d20/event_8h.html" title="Event handling operations." alt="" coords="513,244,584,271"/>
<area shape="rect" title=" " alt="" coords="963,169,1059,196"/>
<area shape="rect" href="../../d7/d55/scheduler_2agent_2database_8h_source.html" title=" " alt="" coords="456,95,551,121"/>
<area shape="rect" title=" " alt="" coords="1235,95,1299,121"/>
<area shape="rect" title=" " alt="" coords="1324,95,1387,121"/>
<area shape="rect" title=" " alt="" coords="1411,95,1499,121"/>
<area shape="rect" title=" " alt="" coords="1523,95,1598,121"/>
<area shape="rect" title=" " alt="" coords="860,393,939,420"/>
<area shape="rect" title=" " alt="" coords="607,468,675,495"/>
<area shape="rect" title=" " alt="" coords="512,468,583,495"/>
<area shape="rect" title=" " alt="" coords="196,468,280,495"/>
<area shape="rect" title=" " alt="" coords="587,393,660,420"/>
<area shape="rect" href="../../dc/df8/fossconfig_8h.html" title="FOSSology library to read config file." alt="" coords="736,393,836,420"/>
<area shape="rect" title=" " alt="" coords="305,468,379,495"/>
<area shape="rect" title=" " alt="" coords="404,468,488,495"/>
</map>
</div>
</div>
<p><a href="../../d6/d2b/agent_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d98/structagent__spawn__args.html">agent_spawn_args</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aea7a63a87c654b4d6cf6b784cb96a029"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#aea7a63a87c654b4d6cf6b784cb96a029">TEST_NULV</a>(a)</td></tr>
<tr class="memdesc:aea7a63a87c654b4d6cf6b784cb96a029"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test if paramater is NULL.  <a href="../../d6/d2b/agent_8c.html#aea7a63a87c654b4d6cf6b784cb96a029">More...</a><br /></td></tr>
<tr class="separator:aea7a63a87c654b4d6cf6b784cb96a029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4f676fff69bdafe3b80d7b5b641c802"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#ac4f676fff69bdafe3b80d7b5b641c802">TEST_NULL</a>(a,  ret)</td></tr>
<tr class="memdesc:ac4f676fff69bdafe3b80d7b5b641c802"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test if paramater is NULL.  <a href="../../d6/d2b/agent_8c.html#ac4f676fff69bdafe3b80d7b5b641c802">More...</a><br /></td></tr>
<tr class="separator:ac4f676fff69bdafe3b80d7b5b641c802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44999b3dbafd2f314d1cf63503ee1864"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a44999b3dbafd2f314d1cf63503ee1864">AGENT_CREDENTIAL</a></td></tr>
<tr class="separator:a44999b3dbafd2f314d1cf63503ee1864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a108bc419497ee3969eef68f35c35254c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a108bc419497ee3969eef68f35c35254c">AGENT_LOG_CREDENTIAL</a></td></tr>
<tr class="separator:a108bc419497ee3969eef68f35c35254c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45060b7ee579ed1be82104b92a94688a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a45060b7ee579ed1be82104b92a94688a">AGENT_ERROR</a>(...)</td></tr>
<tr class="separator:a45060b7ee579ed1be82104b92a94688a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a957e2f7a4b979054578c57d1643e2695"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a957e2f7a4b979054578c57d1643e2695">AGENT_NOTIFY</a>(...)</td></tr>
<tr class="separator:a957e2f7a4b979054578c57d1643e2695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80e72f96745cda7da6b4315398f59397"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a80e72f96745cda7da6b4315398f59397">AGENT_WARNING</a>(...)</td></tr>
<tr class="separator:a80e72f96745cda7da6b4315398f59397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a399fae25c063319976a31a1013be5cdc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a399fae25c063319976a31a1013be5cdc">AGENT_SEQUENTIAL_PRINT</a>(...)</td></tr>
<tr class="separator:a399fae25c063319976a31a1013be5cdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3df8d0ce3b82f5435ec8a8ac2cb5218c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a3df8d0ce3b82f5435ec8a8ac2cb5218c">AGENT_CONCURRENT_PRINT</a>(...)</td></tr>
<tr class="separator:a3df8d0ce3b82f5435ec8a8ac2cb5218c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af00e53d4e298dc1c2dea2296c8514cf7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#af00e53d4e298dc1c2dea2296c8514cf7">SELECT_STRING</a>(passed)&#160;&#160;&#160;<a class="el" href="../../d3/dd1/scheduler_2agent_2scheduler_8h.html#a432a5376861379acc8b2c151221d63bb">MK_STRING_LIT</a>(AGENT_##passed),</td></tr>
<tr class="separator:af00e53d4e298dc1c2dea2296c8514cf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ee87dd56484c6eadb1a9ae23804925"><td class="memItemLeft" align="right" valign="top"><a id="aa2ee87dd56484c6eadb1a9ae23804925"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_CMD_ARGS</b>&#160;&#160;&#160;30</td></tr>
<tr class="separator:aa2ee87dd56484c6eadb1a9ae23804925"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1c97c8543f90d47bea4165fb9311cad1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a1c97c8543f90d47bea4165fb9311cad1">agent_close_fd</a> (int *pid_ptr, <a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent, <a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *excepted)</td></tr>
<tr class="memdesc:a1c97c8543f90d47bea4165fb9311cad1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This will close all of the agent's pipes.  <a href="../../d6/d2b/agent_8c.html#a1c97c8543f90d47bea4165fb9311cad1">More...</a><br /></td></tr>
<tr class="separator:a1c97c8543f90d47bea4165fb9311cad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1712c7a9bed67d46a96e1a95528be56d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a1712c7a9bed67d46a96e1a95528be56d">update</a> (int *pid_ptr, <a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent, gpointer unused)</td></tr>
<tr class="separator:a1712c7a9bed67d46a96e1a95528be56d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b73a3a5220a59ca337dbf977311bb25"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a4b73a3a5220a59ca337dbf977311bb25">agent_kill_traverse</a> (int *pid, <a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent, gpointer unused)</td></tr>
<tr class="memdesc:a4b73a3a5220a59ca337dbf977311bb25"><td class="mdescLeft">&#160;</td><td class="mdescRight">GTraversalFunction that kills all of the agents.  <a href="../../d6/d2b/agent_8c.html#a4b73a3a5220a59ca337dbf977311bb25">More...</a><br /></td></tr>
<tr class="separator:a4b73a3a5220a59ca337dbf977311bb25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01a648c0b8cba0dfa8fb2fc2c83e7cb7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a01a648c0b8cba0dfa8fb2fc2c83e7cb7">agent_list</a> (char *name, <a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a> *ma, GOutputStream *ostr)</td></tr>
<tr class="memdesc:a01a648c0b8cba0dfa8fb2fc2c83e7cb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">GTraverseFunction that will print the name of every agent in alphabetical order separated by spaces.  <a href="../../d6/d2b/agent_8c.html#a01a648c0b8cba0dfa8fb2fc2c83e7cb7">More...</a><br /></td></tr>
<tr class="separator:a01a648c0b8cba0dfa8fb2fc2c83e7cb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28ece085d733632dcbeddda6a4b31a31"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a28ece085d733632dcbeddda6a4b31a31">agent_test</a> (const gchar *name, <a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a> *ma, <a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *scheduler)</td></tr>
<tr class="memdesc:a28ece085d733632dcbeddda6a4b31a31"><td class="mdescLeft">&#160;</td><td class="mdescRight">GTraversalFunction that tests the current agent on every host.  <a href="../../d6/d2b/agent_8c.html#a28ece085d733632dcbeddda6a4b31a31">More...</a><br /></td></tr>
<tr class="separator:a28ece085d733632dcbeddda6a4b31a31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acee1796477d4c61171779f08b51aacd8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#acee1796477d4c61171779f08b51aacd8">agent_listen</a> (<a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *scheduler, <a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent)</td></tr>
<tr class="separator:acee1796477d4c61171779f08b51aacd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedf56dfcc6fb0c66430cafc9cccd2edb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#aedf56dfcc6fb0c66430cafc9cccd2edb">shell_parse</a> (char *confdir, int user_id, int group_id, char *input, char *jq_cmd_args, int <a class="el" href="../../de/d32/libfossscheduler_8c.html#a314fdbd38dd45cce0beef41fd90f436e">jobId</a>, int *argc, char ***argv)</td></tr>
<tr class="memdesc:aedf56dfcc6fb0c66430cafc9cccd2edb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses the shell command that is found in the configuration file.  <a href="../../d6/d2b/agent_8c.html#aedf56dfcc6fb0c66430cafc9cccd2edb">More...</a><br /></td></tr>
<tr class="separator:aedf56dfcc6fb0c66430cafc9cccd2edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af776cc95b5860d05c8fd829506f3d6d0"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#af776cc95b5860d05c8fd829506f3d6d0">agent_spawn</a> (<a class="el" href="../../d0/d98/structagent__spawn__args.html">agent_spawn_args</a> *pass)</td></tr>
<tr class="memdesc:af776cc95b5860d05c8fd829506f3d6d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Spawns a new agent using the command passed in using the meta agent.  <a href="../../d6/d2b/agent_8c.html#af776cc95b5860d05c8fd829506f3d6d0">More...</a><br /></td></tr>
<tr class="separator:af776cc95b5860d05c8fd829506f3d6d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87fd1551a74ce79e1c33b4b1132e2a7e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a87fd1551a74ce79e1c33b4b1132e2a7e">meta_agent_init</a> (char *name, char *cmd, int <a class="el" href="../../d0/da5/libfossagent_8c.html#a4cab43818321714ab944d8323575a401">max</a>, int spc)</td></tr>
<tr class="memdesc:a87fd1551a74ce79e1c33b4b1132e2a7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new meta agent.  <a href="../../d6/d2b/agent_8c.html#a87fd1551a74ce79e1c33b4b1132e2a7e">More...</a><br /></td></tr>
<tr class="separator:a87fd1551a74ce79e1c33b4b1132e2a7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af83b190ac590128b4bba927668489a03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#af83b190ac590128b4bba927668489a03">meta_agent_destroy</a> (<a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a> *ma)</td></tr>
<tr class="separator:af83b190ac590128b4bba927668489a03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2815cb7401c7c849c2e55bfa9ebca8f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a2815cb7401c7c849c2e55bfa9ebca8f8">agent_init</a> (<a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *scheduler, <a class="el" href="../../d5/dcf/structhost__t.html">host_t</a> *host, <a class="el" href="../../d2/d68/structjob__t.html">job_t</a> *job)</td></tr>
<tr class="memdesc:a2815cb7401c7c849c2e55bfa9ebca8f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate and spawn a new agent.  <a href="../../d6/d2b/agent_8c.html#a2815cb7401c7c849c2e55bfa9ebca8f8">More...</a><br /></td></tr>
<tr class="separator:a2815cb7401c7c849c2e55bfa9ebca8f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7971cb7d877d05a37a3538b09b9c51c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a7971cb7d877d05a37a3538b09b9c51c1">agent_destroy</a> (<a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent)</td></tr>
<tr class="memdesc:a7971cb7d877d05a37a3538b09b9c51c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the memory associated with an agent.  <a href="../../d6/d2b/agent_8c.html#a7971cb7d877d05a37a3538b09b9c51c1">More...</a><br /></td></tr>
<tr class="separator:a7971cb7d877d05a37a3538b09b9c51c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af577358fd57f9ee0f9992a121633ea92"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#af577358fd57f9ee0f9992a121633ea92">agent_death_event</a> (<a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *scheduler, pid_t *pid)</td></tr>
<tr class="separator:af577358fd57f9ee0f9992a121633ea92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabe674718bdd97db91c9820468e7fd2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#aabe674718bdd97db91c9820468e7fd2a">agent_create_event</a> (<a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *scheduler, <a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent)</td></tr>
<tr class="memdesc:aabe674718bdd97db91c9820468e7fd2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event created when a new agent has been created.  <a href="../../d6/d2b/agent_8c.html#aabe674718bdd97db91c9820468e7fd2a">More...</a><br /></td></tr>
<tr class="separator:aabe674718bdd97db91c9820468e7fd2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12c890c98a44f6cdab3ea7e41ff74f41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a12c890c98a44f6cdab3ea7e41ff74f41">agent_ready_event</a> (<a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *scheduler, <a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent)</td></tr>
<tr class="memdesc:a12c890c98a44f6cdab3ea7e41ff74f41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event created when an agent is ready for more data.  <a href="../../d6/d2b/agent_8c.html#a12c890c98a44f6cdab3ea7e41ff74f41">More...</a><br /></td></tr>
<tr class="separator:a12c890c98a44f6cdab3ea7e41ff74f41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6961b0fc29db98d8096506e09402aca2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a6961b0fc29db98d8096506e09402aca2">agent_update_event</a> (<a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *scheduler, void *unused)</td></tr>
<tr class="separator:a6961b0fc29db98d8096506e09402aca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a836dc34ab3290d7f9f7922a1c8f25e12"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a836dc34ab3290d7f9f7922a1c8f25e12">agent_fail_event</a> (<a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *scheduler, <a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent)</td></tr>
<tr class="memdesc:a836dc34ab3290d7f9f7922a1c8f25e12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fails an agent.  <a href="../../d6/d2b/agent_8c.html#a836dc34ab3290d7f9f7922a1c8f25e12">More...</a><br /></td></tr>
<tr class="separator:a836dc34ab3290d7f9f7922a1c8f25e12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae28de1b7ee8b533ee9006bde4752c0c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#ae28de1b7ee8b533ee9006bde4752c0c9">list_agents_event</a> (<a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *scheduler, GOutputStream *ostr)</td></tr>
<tr class="memdesc:ae28de1b7ee8b533ee9006bde4752c0c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive agent on interface.  <a href="../../d6/d2b/agent_8c.html#ae28de1b7ee8b533ee9006bde4752c0c9">More...</a><br /></td></tr>
<tr class="separator:ae28de1b7ee8b533ee9006bde4752c0c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc0b61c2c7e6019e94ca216d8b3eed0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#abc0b61c2c7e6019e94ca216d8b3eed0d">agent_transition</a> (<a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent, agent_status new_status)</td></tr>
<tr class="separator:abc0b61c2c7e6019e94ca216d8b3eed0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9876a022f6032d5bf3652f1c37e646e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a9876a022f6032d5bf3652f1c37e646e4">agent_pause</a> (<a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent)</td></tr>
<tr class="separator:a9876a022f6032d5bf3652f1c37e646e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad017785d2df26f8027ece71751f4be3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#ad017785d2df26f8027ece71751f4be3e">agent_unpause</a> (<a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent)</td></tr>
<tr class="separator:ad017785d2df26f8027ece71751f4be3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affd1137681a81c01f73830a30a03a373"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#affd1137681a81c01f73830a30a03a373">agent_print_status</a> (<a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent, GOutputStream *ostr)</td></tr>
<tr class="memdesc:affd1137681a81c01f73830a30a03a373"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the status of the agent to the output stream provided.  <a href="../../d6/d2b/agent_8c.html#affd1137681a81c01f73830a30a03a373">More...</a><br /></td></tr>
<tr class="separator:affd1137681a81c01f73830a30a03a373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89ab7a1857777d79e4f90070e7c695db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a89ab7a1857777d79e4f90070e7c695db">agent_kill</a> (<a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent)</td></tr>
<tr class="memdesc:a89ab7a1857777d79e4f90070e7c695db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unclean kill of an agent.  <a href="../../d6/d2b/agent_8c.html#a89ab7a1857777d79e4f90070e7c695db">More...</a><br /></td></tr>
<tr class="separator:a89ab7a1857777d79e4f90070e7c695db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a194e6f15bff5d6de1ebff46192aa6338"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a194e6f15bff5d6de1ebff46192aa6338">aprintf</a> (<a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent, const char *fmt,...)</td></tr>
<tr class="separator:a194e6f15bff5d6de1ebff46192aa6338"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32490003d899f85511bcd3fe2ee00e1c"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a32490003d899f85511bcd3fe2ee00e1c">agent_write</a> (<a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent, const void *buf, int count)</td></tr>
<tr class="separator:a32490003d899f85511bcd3fe2ee00e1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad373da5181a796b141b3754ef5c406dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#ad373da5181a796b141b3754ef5c406dd">test_agents</a> (<a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *scheduler)</td></tr>
<tr class="memdesc:ad373da5181a796b141b3754ef5c406dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls the agent test function for every type of agent.  <a href="../../d6/d2b/agent_8c.html#ad373da5181a796b141b3754ef5c406dd">More...</a><br /></td></tr>
<tr class="separator:ad373da5181a796b141b3754ef5c406dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6eff214bf1062b4065e1bc346f3cb69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#ad6eff214bf1062b4065e1bc346f3cb69">kill_agents</a> (<a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *scheduler)</td></tr>
<tr class="memdesc:ad6eff214bf1062b4065e1bc346f3cb69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call the agent_kill function for every agent within the system.  <a href="../../d6/d2b/agent_8c.html#ad6eff214bf1062b4065e1bc346f3cb69">More...</a><br /></td></tr>
<tr class="separator:ad6eff214bf1062b4065e1bc346f3cb69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3b50e6577331d4ee63d14983ab8543b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#aa3b50e6577331d4ee63d14983ab8543b">add_meta_agent</a> (GTree *meta_agents, char *name, char *cmd, int <a class="el" href="../../d0/da5/libfossagent_8c.html#a4cab43818321714ab944d8323575a401">max</a>, int spc)</td></tr>
<tr class="separator:aa3b50e6577331d4ee63d14983ab8543b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb41c6a9412cb7007712ad9e45d0022b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#aeb41c6a9412cb7007712ad9e45d0022b">is_meta_special</a> (<a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a> *ma, int special_type)</td></tr>
<tr class="memdesc:aeb41c6a9412cb7007712ad9e45d0022b"><td class="mdescLeft">&#160;</td><td class="mdescRight">tests if a particular meta agent has a specific special flag set  <a href="../../d6/d2b/agent_8c.html#aeb41c6a9412cb7007712ad9e45d0022b">More...</a><br /></td></tr>
<tr class="separator:aeb41c6a9412cb7007712ad9e45d0022b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeaf3088e6e16ca79a79150d9048c709"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#adeaf3088e6e16ca79a79150d9048c709">is_agent_special</a> (<a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *agent, int special_type)</td></tr>
<tr class="memdesc:adeaf3088e6e16ca79a79150d9048c709"><td class="mdescLeft">&#160;</td><td class="mdescRight">tests if a particular agent has a specific special flag set  <a href="../../d6/d2b/agent_8c.html#adeaf3088e6e16ca79a79150d9048c709">More...</a><br /></td></tr>
<tr class="separator:adeaf3088e6e16ca79a79150d9048c709"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7458d721b3ce1f7fbdc86dd1fcd110b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#a7458d721b3ce1f7fbdc86dd1fcd110b5">meta_agent_increase_count</a> (<a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a> *ma)</td></tr>
<tr class="separator:a7458d721b3ce1f7fbdc86dd1fcd110b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5ef10c96ed63d9e9f9fc043dfab7f57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d2b/agent_8c.html#ad5ef10c96ed63d9e9f9fc043dfab7f57">meta_agent_decrease_count</a> (<a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a> *ma)</td></tr>
<tr class="separator:ad5ef10c96ed63d9e9f9fc043dfab7f57"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a056dba6aba727295275aaea90bf5fa35"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><b>agent_status_strings</b> []</td></tr>
<tr class="separator:a056dba6aba727295275aaea90bf5fa35"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains agent related information. </p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000046">Todo:</a></b></dt><dd>Change the "&lt;date&gt; &lt;time&gt; scheduler ::" to "&lt;date&gt; &lt;time&gt; agent ::" for some log messages </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a3df8d0ce3b82f5435ec8a8ac2cb5218c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3df8d0ce3b82f5435ec8a8ac2cb5218c">&#9670;&nbsp;</a></span>AGENT_CONCURRENT_PRINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AGENT_CONCURRENT_PRINT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keywordflow">do</span> {                             \</div>
<div class="line">  AGENT_LOG_CREDENTIAL;                                 \</div>
<div class="line">  con_printf(<a class="code" href="../../d7/d67/job_8c.html#adf9d770b280fad890b5853edbe803c11">job_log</a>(agent-&gt;owner), __VA_ARGS__); } <span class="keywordflow">while</span>(0)</div>
<div class="ttc" id="ajob_8c_html_adf9d770b280fad890b5853edbe803c11"><div class="ttname"><a href="../../d7/d67/job_8c.html#adf9d770b280fad890b5853edbe803c11">job_log</a></div><div class="ttdeci">log_t * job_log(job_t *job)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d67/job_8c_source.html#l00637">job.c:637</a></div></div>
</div><!-- fragment --><p>Send logging specifically to the agent log file </p>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00097">97</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a44999b3dbafd2f314d1cf63503ee1864"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44999b3dbafd2f314d1cf63503ee1864">&#9670;&nbsp;</a></span>AGENT_CREDENTIAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AGENT_CREDENTIAL</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  log_printf(<span class="stringliteral">&quot;JOB[%d].%s[%d.%s]: &quot;</span>, agent-&gt;owner-&gt;id, agent-&gt;type-&gt;name, \</div>
<div class="line">      agent-&gt;pid, agent-&gt;host-&gt;name)</div>
</div><!-- fragment --><p>Prints the credential of the agent </p>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00061">61</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a45060b7ee579ed1be82104b92a94688a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45060b7ee579ed1be82104b92a94688a">&#9670;&nbsp;</a></span>AGENT_ERROR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AGENT_ERROR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keywordflow">do</span> {                       \</div>
<div class="line">  log_printf(<span class="stringliteral">&quot;ERROR: %s.%d: &quot;</span>, __FILE__, __LINE__); \</div>
<div class="line">  AGENT_CREDENTIAL;                                 \</div>
<div class="line">  log_printf(__VA_ARGS__);                          \</div>
<div class="line">  log_printf(<span class="stringliteral">&quot;\n&quot;</span>); } <span class="keywordflow">while</span>(0)</div>
</div><!-- fragment --><p>ERROR macro specifically for agents </p>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00071">71</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a108bc419497ee3969eef68f35c35254c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a108bc419497ee3969eef68f35c35254c">&#9670;&nbsp;</a></span>AGENT_LOG_CREDENTIAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AGENT_LOG_CREDENTIAL</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  con_printf(<a class="code" href="../../d7/d67/job_8c.html#adf9d770b280fad890b5853edbe803c11">job_log</a>(agent-&gt;owner), <span class="stringliteral">&quot;JOB[%d].%s[%d.%s]: &quot;</span>,                \</div>
<div class="line">      agent-&gt;owner-&gt;id, agent-&gt;type-&gt;name, agent-&gt;pid, agent-&gt;host-&gt;name)</div>
</div><!-- fragment --><p>Prints the credential to the agent log </p>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00066">66</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a957e2f7a4b979054578c57d1643e2695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a957e2f7a4b979054578c57d1643e2695">&#9670;&nbsp;</a></span>AGENT_NOTIFY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AGENT_NOTIFY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keywordflow">if</span>(<a class="code" href="../../d5/d77/logging_8h.html#a93a26e16fb9b61ce343d0eb3d60f6754">TEST_NOTIFY</a>) <span class="keywordflow">do</span> { \</div>
<div class="line">  log_printf(<span class="stringliteral">&quot;NOTE: &quot;</span>);                           \</div>
<div class="line">  AGENT_CREDENTIAL;                            \</div>
<div class="line">  log_printf(__VA_ARGS__);                        \</div>
<div class="line">  log_printf(<span class="stringliteral">&quot;\n&quot;</span>); } <span class="keywordflow">while</span>(0)</div>
<div class="ttc" id="alogging_8h_html_a93a26e16fb9b61ce343d0eb3d60f6754"><div class="ttname"><a href="../../d5/d77/logging_8h.html#a93a26e16fb9b61ce343d0eb3d60f6754">TEST_NOTIFY</a></div><div class="ttdeci">#define TEST_NOTIFY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d77/logging_8h_source.html#l00093">logging.h:93</a></div></div>
</div><!-- fragment --><p>NOTIFY macro specifically for agents </p>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00078">78</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a399fae25c063319976a31a1013be5cdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a399fae25c063319976a31a1013be5cdc">&#9670;&nbsp;</a></span>AGENT_SEQUENTIAL_PRINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AGENT_SEQUENTIAL_PRINT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keywordflow">if</span>(TVERB_AGENT) <span class="keywordflow">do</span> { \</div>
<div class="line">  AGENT_CREDENTIAL;                          \</div>
<div class="line">  log_printf(__VA_ARGS__); } <span class="keywordflow">while</span>(0)</div>
</div><!-- fragment --><p>STANDARD verbose macro changed for agents </p>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00092">92</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a80e72f96745cda7da6b4315398f59397"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80e72f96745cda7da6b4315398f59397">&#9670;&nbsp;</a></span>AGENT_WARNING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AGENT_WARNING</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keywordflow">if</span>(<a class="code" href="../../d5/d77/logging_8h.html#a5cb4cbe28881a6f5b74a612fe099e41a">TEST_WARNING</a>) <span class="keywordflow">do</span> {      \</div>
<div class="line">  log_printf(<span class="stringliteral">&quot;WARNING %s.%d: &quot;</span>, __FILE__, __LINE__);  \</div>
<div class="line">  AGENT_CREDENTIAL;                                   \</div>
<div class="line">  log_printf(__VA_ARGS__);                            \</div>
<div class="line">  log_printf(<span class="stringliteral">&quot;\n&quot;</span>); } <span class="keywordflow">while</span>(0)</div>
<div class="ttc" id="alogging_8h_html_a5cb4cbe28881a6f5b74a612fe099e41a"><div class="ttname"><a href="../../d5/d77/logging_8h.html#a5cb4cbe28881a6f5b74a612fe099e41a">TEST_WARNING</a></div><div class="ttdeci">#define TEST_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d77/logging_8h_source.html#l00100">logging.h:100</a></div></div>
</div><!-- fragment --><p>WARNING macro specifically for agents </p>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00085">85</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="af00e53d4e298dc1c2dea2296c8514cf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af00e53d4e298dc1c2dea2296c8514cf7">&#9670;&nbsp;</a></span>SELECT_STRING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SELECT_STRING</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">passed</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../d3/dd1/scheduler_2agent_2scheduler_8h.html#a432a5376861379acc8b2c151221d63bb">MK_STRING_LIT</a>(AGENT_##passed),</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Array of C-Strings used to pretty-print the agent status in the log file. Uses the X-Macro defined in <a class="el" href="../../de/d9e/agent_8h.html">agent.h</a></p>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00109">109</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="ac4f676fff69bdafe3b80d7b5b641c802"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4f676fff69bdafe3b80d7b5b641c802">&#9670;&nbsp;</a></span>TEST_NULL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEST_NULL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ret&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keywordflow">if</span>(!a) { \</div>
<div class="line">  errno = EINVAL; <a class="code" href="../../d5/d77/logging_8h.html#a02ce8a968600d004ba60858425c46307">ERROR</a>(<span class="stringliteral">&quot;agent passed is NULL, cannot proceed&quot;</span>); <span class="keywordflow">return</span> ret; }</div>
<div class="ttc" id="alogging_8h_html_a02ce8a968600d004ba60858425c46307"><div class="ttname"><a href="../../d5/d77/logging_8h.html#a02ce8a968600d004ba60858425c46307">ERROR</a></div><div class="ttdeci">#define ERROR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d77/logging_8h_source.html#l00079">logging.h:79</a></div></div>
</div><!-- fragment -->
<p>Test if paramater is NULL. </p>
<p>Like <a class="el" href="../../d6/d2b/agent_8c.html#aea7a63a87c654b4d6cf6b784cb96a029" title="Test if paramater is NULL.">TEST_NULV()</a>, returns ret instead of void. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Object to check </td></tr>
    <tr><td class="paramname">ret</td><td>Value to return if a is NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d6/d2b/agent_8c.html#aea7a63a87c654b4d6cf6b784cb96a029" title="Test if paramater is NULL.">TEST_NULV()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00057">57</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="aea7a63a87c654b4d6cf6b784cb96a029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea7a63a87c654b4d6cf6b784cb96a029">&#9670;&nbsp;</a></span>TEST_NULV</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEST_NULV</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keywordflow">if</span>(!a) { \</div>
<div class="line">  errno = EINVAL; <a class="code" href="../../d5/d77/logging_8h.html#a02ce8a968600d004ba60858425c46307">ERROR</a>(<span class="stringliteral">&quot;agent passed is NULL, cannot proceed&quot;</span>); <span class="keywordflow">return</span>; }</div>
</div><!-- fragment -->
<p>Test if paramater is NULL. </p>
<p>If parameter is NULL, set the errno, write the error and return void. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Object to check </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00047">47</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa3b50e6577331d4ee63d14983ab8543b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3b50e6577331d4ee63d14983ab8543b">&#9670;&nbsp;</a></span>add_meta_agent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int add_meta_agent </td>
          <td>(</td>
          <td class="paramtype">GTree *&#160;</td>
          <td class="paramname"><em>meta_agents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>spc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new meta agent and adds it to the list of meta agents. This will parse the shell command that will start the agent process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">meta_agents</td><td>GTree of meta agents available for the scheduler </td></tr>
    <tr><td class="paramname">name</td><td>the name of the meta agent (e.g. "nomos", "copyright", etc...) </td></tr>
    <tr><td class="paramname">cmd</td><td>the shell command used to the run the agent </td></tr>
    <tr><td class="paramname">max</td><td>the max number of this type of agent that can run concurrently </td></tr>
    <tr><td class="paramname">spc</td><td>anything special about the agent type </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01343">1343</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a1c97c8543f90d47bea4165fb9311cad1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c97c8543f90d47bea4165fb9311cad1">&#9670;&nbsp;</a></span>agent_close_fd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agent_close_fd </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pid_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>excepted</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This will close all of the agent's pipes. </p>
<p>This function will be called by g_tree_foreach() which is the reason for its formatting.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pid_ptr</td><td>the key that was used to store this agent </td></tr>
    <tr><td class="paramname">agent</td><td>the agent that is being closed </td></tr>
    <tr><td class="paramname">excepted</td><td>this is an agent we don't want to close, this is it </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>always returns 0 to indicate that the traversal should continue </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00129">129</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="aabe674718bdd97db91c9820468e7fd2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabe674718bdd97db91c9820468e7fd2a">&#9670;&nbsp;</a></span>agent_create_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void agent_create_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *&#160;</td>
          <td class="paramname"><em>scheduler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Event created when a new agent has been created. </p>
<p>This means that the agent has been allocated internally and the fork() call has successfully executed. The agent has not yet communicated with the scheduler when this event is created.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scheduler</td><td>the scheduler reference to which agent has to attach </td></tr>
    <tr><td class="paramname">agent</td><td>the agent that has been created. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01048">1048</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="af577358fd57f9ee0f9992a121633ea92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af577358fd57f9ee0f9992a121633ea92">&#9670;&nbsp;</a></span>agent_death_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void agent_death_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *&#160;</td>
          <td class="paramname"><em>scheduler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t *&#160;</td>
          <td class="paramname"><em>pid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event created when a SIGCHLD is received for an agent. If one SIGCHILD is received for several process deaths, there will be seperate events for each pid.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scheduler</td><td>the scheduler reference to which process was attached to </td></tr>
    <tr><td class="paramname">pid</td><td>the pid of the process that died </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00979">979</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a7971cb7d877d05a37a3538b09b9c51c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7971cb7d877d05a37a3538b09b9c51c1">&#9670;&nbsp;</a></span>agent_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void agent_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees the memory associated with an agent. </p>
<p>This include:</p><ol type="1">
<li>All of the files that are open in the agent</li>
<li>All of the pipes still open for the agent</li>
<li>Inform the os that the process can die using a waitpid()</li>
<li>Free the internal data structure of the agent</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">agent</td><td>the agent to destroy </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00951">951</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a836dc34ab3290d7f9f7922a1c8f25e12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a836dc34ab3290d7f9f7922a1c8f25e12">&#9670;&nbsp;</a></span>agent_fail_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void agent_fail_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *&#160;</td>
          <td class="paramname"><em>scheduler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fails an agent. </p>
<p>This will move the agent status to AG_FAILED and send a SIGKILL to the relevant agent. It will also update the agents status within the job that owns it and close the associated communication thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scheduler</td><td>the scheduler to which agent is attached </td></tr>
    <tr><td class="paramname">agent</td><td>the agent that is failing. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01129">1129</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a2815cb7401c7c849c2e55bfa9ebca8f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2815cb7401c7c849c2e55bfa9ebca8f8">&#9670;&nbsp;</a></span>agent_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a>* agent_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *&#160;</td>
          <td class="paramname"><em>scheduler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dcf/structhost__t.html">host_t</a> *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d68/structjob__t.html">job_t</a> *&#160;</td>
          <td class="paramname"><em>job</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate and spawn a new agent. </p>
<p>The agent that is spawned will be of the same type as the meta_agent that is passed to this function and the agent will run on the host that is passed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scheduler</td><td>the scheduler this agent is being created under </td></tr>
    <tr><td class="paramname">host</td><td>the machine to start the agent on </td></tr>
    <tr><td class="paramname">job</td><td>the job that this agent belongs to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00829">829</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a89ab7a1857777d79e4f90070e7c695db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89ab7a1857777d79e4f90070e7c695db">&#9670;&nbsp;</a></span>agent_kill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void agent_kill </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unclean kill of an agent. </p>
<p>This simply sends a SIGKILL to the agent and lets everything else get cleaned up normally.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">agent</td><td>the agent to kill </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01250">1250</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a4b73a3a5220a59ca337dbf977311bb25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b73a3a5220a59ca337dbf977311bb25">&#9670;&nbsp;</a></span>agent_kill_traverse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agent_kill_traverse </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpointer&#160;</td>
          <td class="paramname"><em>unused</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>GTraversalFunction that kills all of the agents. </p>
<p>This is used for an unclean death since all of the child processes will be sent a kill signal instead of existing cleanly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>the process id associated with the agent </td></tr>
    <tr><td class="paramname">agent</td><td>a pointer to the information associated with an agent </td></tr>
    <tr><td class="paramname">unused</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>always returns 0 to indicate that the traversal should continue </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00202">202</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a01a648c0b8cba0dfa8fb2fc2c83e7cb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01a648c0b8cba0dfa8fb2fc2c83e7cb7">&#9670;&nbsp;</a></span>agent_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agent_list </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a> *&#160;</td>
          <td class="paramname"><em>ma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GOutputStream *&#160;</td>
          <td class="paramname"><em>ostr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>GTraverseFunction that will print the name of every agent in alphabetical order separated by spaces. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the agent </td></tr>
    <tr><td class="paramname">ma</td><td>the meta_agents structure associated with the specific name </td></tr>
    <tr><td class="paramname">ostr</td><td>the output stream to write the data to, socket in this case </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>always returns 0 to indicate that the traversal should continue </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00217">217</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="acee1796477d4c61171779f08b51aacd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acee1796477d4c61171779f08b51aacd8">&#9670;&nbsp;</a></span>agent_listen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agent_listen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *&#160;</td>
          <td class="paramname"><em>scheduler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Main function used for agent communication. This is where the communication thread will spend the majority of its time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scheduler</td><td>Pointer to scheduler interface </td></tr>
    <tr><td class="paramname">agent</td><td>a the agent that will be listened on </td></tr>
  </table>
  </dd>
</dl>
<p>Start by getting the version information from the agent. The agent should send "VERSION: &lt;string&gt;" where the string is the version information. there are five things that can happen here.</p><ol type="1">
<li>the agent sends correct version information =&gt; continue</li>
<li>this is the first agent to send version info =&gt; save version and continue</li>
<li>the agent sends incorrect version information =&gt; invalidate the agent</li>
<li>the agent doesn't send version information =&gt; invalidate the agent</li>
<li>the agent crashed before sending information =&gt; close the thread</li>
</ol>
<p>If we reach here the agent has correctly sent VERION information to the scheduler. The agent now enters a listening loop. The communication thread will wait for input from the agent, and act according to the agents current state and what was sent</p>
<dl class="section note"><dt>Note</dt><dd>any command prepended by "@@@" is a message from the scheduler to the communication thread, not from the agent.</dd></dl>
<ul>
<li><p class="startli"><b>command:</b> "BYE"</p>
<p class="startli">The agent has finished processing all of the data from the relevant job. This command is follow by a return code. 0 indicates that it completed correctly, anything else can be used as an error code. Regardless of whether the agent completed, the communication thread will shutdown.</p>
</li>
<li><p class="startli"><b>command</b> "@@@1"</p>
<p class="startli">The scheduler needs the communication thread to shutdown. This will normally only happen if the agent crashes and the scheduler receives a SIGCHLD for it before it sends "BYE #".</p>
</li>
<li><p class="startli"><b>command</b> "@@@0"</p>
<p class="startli">The scheduler has updated the data that the agent should be processing. This is sent after an agent sends the "OK" command, and the scheduler has processed the resulting <a class="el" href="../../d6/d2b/agent_8c.html#a12c890c98a44f6cdab3ea7e41ff74f41" title="Event created when an agent is ready for more data.">agent_ready_event()</a>.</p>
</li>
<li><p class="startli"><b>command:</b> "OK"</p>
<p class="startli">The agent is ready for data. This is sent it 2 situations:</p><ol type="1">
<li>the agent has completed startup and is ready for the first part of the data that needs to be analyzed for the job</li>
<li>the agent has finished the last piece of the job it was working on and is ready for the next piece or to be shutdown</li>
</ol>
</li>
<li><p class="startli"><b>command:</b> "HEART"</p>
<p class="startli">Given the size of jobs that can be processed by FOSSology, agents can take an extremely long period of time to finish. To make sure that an agent is still working it must periodically update the scheduler with how much of the job it has processed.</p>
</li>
<li><p class="startli"><b>command:</b> "EMAIL"</p>
<p class="startli">Agents have the ability to set the message that will be sent with the notification email. This grabs the message and sets inside the job that the agent is running under.</p>
</li>
<li><p class="startli"><b>command:</b> "SPECIAL"</p>
<p class="startli">Agents can set special attributes that change how it is treated during execution. This grabs the command and whether it is being set to true or false. Agents use this by calling <a class="el" href="../../de/d32/libfossscheduler_8c.html#a21b9be21d7535441d09ab0aef5fb89b5" title="Sets something special about the agent within the scheduler.">fo_scheduler_set_special()</a> in the agent api.</p>
</li>
<li><p class="startli"><b>command:</b> GETSPECIAL</p>
<p class="startli">The agent has requested the value of a special attribute. The scheduler will respond with the value of the special attribute.</p>
</li>
<li><p class="startli"><b>command:</b> unknown</p>
<p class="startli">The agent didn't use a legal command. This will simply put what the agent printed into the log and move on.</p>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00264">264</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a9876a022f6032d5bf3652f1c37e646e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9876a022f6032d5bf3652f1c37e646e4">&#9670;&nbsp;</a></span>agent_pause()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void agent_pause </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pauses an agent, this will pause the agent by sending a SIGSTOP to the process and then decrease the load on the host machine.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">agent</td><td>the agent to pause </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01191">1191</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="affd1137681a81c01f73830a30a03a373"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affd1137681a81c01f73830a30a03a373">&#9670;&nbsp;</a></span>agent_print_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void agent_print_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GOutputStream *&#160;</td>
          <td class="paramname"><em>ostr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints the status of the agent to the output stream provided. </p>
<p>The formating for this is as such: </p><pre class="fragment">`agent:&lt;pid&gt; host:&lt;host&gt; type:&lt;type&gt; status:&lt;status&gt; time:&lt;time&gt;`
</pre> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">agent</td><td>Agent to get info from </td></tr>
    <tr><td class="paramname">ostr</td><td>Stream to write info to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01220">1220</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a12c890c98a44f6cdab3ea7e41ff74f41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12c890c98a44f6cdab3ea7e41ff74f41">&#9670;&nbsp;</a></span>agent_ready_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void agent_ready_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *&#160;</td>
          <td class="paramname"><em>scheduler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Event created when an agent is ready for more data. </p>
<p>This will event will be created when an agent first communicates with the scheduler, so this will handle changing its status to AG_RUNNING. This will also be created every time an agent finishes a block of data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scheduler</td><td>the scheduler reference to which agent is attached </td></tr>
    <tr><td class="paramname">agent</td><td>the agent that is ready </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01069">1069</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="af776cc95b5860d05c8fd829506f3d6d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af776cc95b5860d05c8fd829506f3d6d0">&#9670;&nbsp;</a></span>agent_spawn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* agent_spawn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d98/structagent__spawn__args.html">agent_spawn_args</a> *&#160;</td>
          <td class="paramname"><em>pass</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Spawns a new agent using the command passed in using the meta agent. </p>
<p>This function will call the fork and exec necessary to create a new agent. As a result what this function does will change depending on if it is running in the child or the parent.</p>
<p><b>child:</b> Will duplicate the stdin, stdout, and stderr pipes for printing to the scheduler, parse the command line options for the agent and start the agent. It will then call exec to start the new agent process</p>
<p><b>parent:</b> This will enter the listen function, and wait for information from the child, either as a failure or as an update for the information being analyzed</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pass</td><td>a pointer to <a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> and the new <a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00656">656</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a28ece085d733632dcbeddda6a4b31a31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28ece085d733632dcbeddda6a4b31a31">&#9670;&nbsp;</a></span>agent_test()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agent_test </td>
          <td>(</td>
          <td class="paramtype">const gchar *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a> *&#160;</td>
          <td class="paramname"><em>ma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *&#160;</td>
          <td class="paramname"><em>scheduler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>GTraversalFunction that tests the current agent on every host. </p>
<p>This will traverse the list of hosts and start an agent that is of the type of the current meta agent on every host.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the meta agent </td></tr>
    <tr><td class="paramname">ma</td><td>The meta_agent structure needed for agent creation </td></tr>
    <tr><td class="paramname">scheduler</td><td>The scheduler object to test the agents on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always return 0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00238">238</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="abc0b61c2c7e6019e94ca216d8b3eed0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc0b61c2c7e6019e94ca216d8b3eed0d">&#9670;&nbsp;</a></span>agent_transition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void agent_transition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">agent_status&#160;</td>
          <td class="paramname"><em>new_status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Changes the status of the agent internal to the scheduler. This function is used to transition between agent states instead of a raw set of the status so that correct printing of the verbose message is guaranteed</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">agent</td><td>the agent to change the status for </td></tr>
    <tr><td class="paramname">new_status</td><td>the new status of the agentchar* sysconfdir = NULL; // system configuration directory (SYSCONFDIR) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01163">1163</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="ad017785d2df26f8027ece71751f4be3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad017785d2df26f8027ece71751f4be3e">&#9670;&nbsp;</a></span>agent_unpause()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void agent_unpause </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unpause the agent, this will send a SIGCONT to the process regardless of if a SIGCONT was sent. If the process wasn't SIGSTOP'd this will do nothing. Also increases the load on the host.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">agent</td><td>the agent to unpause </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01204">1204</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a6961b0fc29db98d8096506e09402aca2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6961b0fc29db98d8096506e09402aca2">&#9670;&nbsp;</a></span>agent_update_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void agent_update_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *&#160;</td>
          <td class="paramname"><em>scheduler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>unused</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event created when the scheduler receives a SIGALRM. This will loop over every agent and call the update function on it. This will kill any agents that are hung without heart beat or any agents that have stopped updating the number of item processed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scheduler</td><td>the scheduler reference to inform </td></tr>
    <tr><td class="paramname">unused</td><td>needed since this an event, but should be NULL </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01114">1114</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a32490003d899f85511bcd3fe2ee00e1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32490003d899f85511bcd3fe2ee00e1c">&#9670;&nbsp;</a></span>agent_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t agent_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write information to the communication thread for the agent. This is used when the scheduler needs to wake up or kill the thread used to talk to the agent. When using this function, one should always print "@@@..." where ... is the message that is actually getting sent.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">agent</td><td>the agent to send the information to </td></tr>
    <tr><td class="paramname">buf</td><td>the actual data </td></tr>
    <tr><td class="paramname">count</td><td>the number of bytes to write to the agent </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>returns if the write was successful </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01301">1301</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a194e6f15bff5d6de1ebff46192aa6338"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a194e6f15bff5d6de1ebff46192aa6338">&#9670;&nbsp;</a></span>aprintf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int aprintf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Acts as a standard printf, but prints the agents instead of stdout. This is the main function used by the scheduler when communicating with the agents.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">agent</td><td>the agent to send the formated data to </td></tr>
    <tr><td class="paramname">fmt</td><td>the formating string for the data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if the print was successful </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01265">1265</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="adeaf3088e6e16ca79a79150d9048c709"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adeaf3088e6e16ca79a79150d9048c709">&#9670;&nbsp;</a></span>is_agent_special()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_agent_special </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>special_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tests if a particular agent has a specific special flag set </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>the agent that should be tested </td></tr>
    <tr><td class="paramname">special_type</td><td>in what way is the agent special </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true or false </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01380">1380</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="aeb41c6a9412cb7007712ad9e45d0022b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb41c6a9412cb7007712ad9e45d0022b">&#9670;&nbsp;</a></span>is_meta_special()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_meta_special </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a> *&#160;</td>
          <td class="paramname"><em>ma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>special_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tests if a particular meta agent has a specific special flag set </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ma</td><td>the meta agent that should be checked </td></tr>
    <tr><td class="paramname">special_type</td><td>in what way is the agent special </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true or false </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01368">1368</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="ad6eff214bf1062b4065e1bc346f3cb69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6eff214bf1062b4065e1bc346f3cb69">&#9670;&nbsp;</a></span>kill_agents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kill_agents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *&#160;</td>
          <td class="paramname"><em>scheduler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call the agent_kill function for every agent within the system. </p>
<p>This will send a SIGKILL to every child process of the scheduler. Used when shutting down the scheduler. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01328">1328</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="ae28de1b7ee8b533ee9006bde4752c0c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae28de1b7ee8b533ee9006bde4752c0c9">&#9670;&nbsp;</a></span>list_agents_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void list_agents_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *&#160;</td>
          <td class="paramname"><em>scheduler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GOutputStream *&#160;</td>
          <td class="paramname"><em>ostr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive agent on interface. </p>
<p>Calls <a class="el" href="../../d6/d2b/agent_8c.html#a01a648c0b8cba0dfa8fb2fc2c83e7cb7" title="GTraverseFunction that will print the name of every agent in alphabetical order separated by spaces.">agent_list()</a> and print evert agent attached to the scheduler. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scheduler</td><td>the scheduler to which agent is attached </td></tr>
    <tr><td class="paramname">ostr</td><td>Stream to write info to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01145">1145</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="ad5ef10c96ed63d9e9f9fc043dfab7f57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5ef10c96ed63d9e9f9fc043dfab7f57">&#9670;&nbsp;</a></span>meta_agent_decrease_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void meta_agent_decrease_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a> *&#160;</td>
          <td class="paramname"><em>ma</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Decrease the running agent count. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ma</td><td>Agent's meta </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01399">1399</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="af83b190ac590128b4bba927668489a03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af83b190ac590128b4bba927668489a03">&#9670;&nbsp;</a></span>meta_agent_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void meta_agent_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a> *&#160;</td>
          <td class="paramname"><em>ma</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free the memory associated with a meta_agent. This is a destructor, and as a result the meta_agent should not be used again after a call to this method</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ma</td><td>the meta_agent to clear </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00811">811</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a7458d721b3ce1f7fbdc86dd1fcd110b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7458d721b3ce1f7fbdc86dd1fcd110b5">&#9670;&nbsp;</a></span>meta_agent_increase_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void meta_agent_increase_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a> *&#160;</td>
          <td class="paramname"><em>ma</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Increase the running agent count. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ma</td><td>Agent's meta </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01389">1389</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a87fd1551a74ce79e1c33b4b1132e2a7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87fd1551a74ce79e1c33b4b1132e2a7e">&#9670;&nbsp;</a></span>meta_agent_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a>* meta_agent_init </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>spc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new meta agent. </p>
<p>This will take and parse the information necessary for the creation of a new agent instance. The name of the agent, the cmd for starting the agent, the number of these agents that can run simutaniously, and any special conditions for this agent. This function is where the cmd will get parsed to be passed as command line args to the new agent.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the agent (i.e. nomos, buckets, etc...) </td></tr>
    <tr><td class="paramname">cmd</td><td>the command for starting the agent in a shell</td></tr>
    <tr><td class="paramname">max</td><td>the number of these that can concurrently, -1 for no limit </td></tr>
    <tr><td class="paramname">spc</td><td>any special conditions associated with the agent </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../de/d5d/structmeta__agent__t.html">meta_agent_t</a> Meta agent </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00771">771</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="aedf56dfcc6fb0c66430cafc9cccd2edb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedf56dfcc6fb0c66430cafc9cccd2edb">&#9670;&nbsp;</a></span>shell_parse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void shell_parse </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>confdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>user_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>group_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>jq_cmd_args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>jobId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char ***&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parses the shell command that is found in the configuration file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">confdir</td><td>The configuration directory for FOSSology </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">user_id</td><td>The id of the user that created the job </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">group_id</td><td>The id of the group that created the job </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">input</td><td>The command line that was in the agent configuration file </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">jq_cmd_args</td><td>Extra parameters required by agent (if any) </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">jobId</td><td>Job id (from db) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">argc</td><td>Returns the number of arguments parsed </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">argv</td><td>The parsed arguments </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00551">551</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="ad373da5181a796b141b3754ef5c406dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad373da5181a796b141b3754ef5c406dd">&#9670;&nbsp;</a></span>test_agents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_agents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3c/structscheduler__t.html">scheduler_t</a> *&#160;</td>
          <td class="paramname"><em>scheduler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calls the agent test function for every type of agent. </p>
<p>This is used when either the -t or -T option are used upon scheduler creation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scheduler</td><td>scheduler reference to test attached agents </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l01317">1317</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<a id="a1712c7a9bed67d46a96e1a95528be56d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1712c7a9bed67d46a96e1a95528be56d">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int update </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pid_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d1d/structagent__t.html">agent_t</a> *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpointer&#160;</td>
          <td class="paramname"><em>unused</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check the status and check in time of an agent.</p><ul>
<li>If we haven't gotten a recent communication, close it</li>
<li>If it hasn't been performing tasks, close it</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pid_ptr</td><td>pointer to key in g_tree, is not used in this function </td></tr>
    <tr><td class="paramname">agent</td><td>the agent that needs to be updated </td></tr>
    <tr><td class="paramname">unused</td><td>data that is also not used in this function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>always returns 0 to indicate that the traversal should continue </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00152">152</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a056dba6aba727295275aaea90bf5fa35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a056dba6aba727295275aaea90bf5fa35">&#9670;&nbsp;</a></span>agent_status_strings</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* agent_status_strings[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{ <a class="code" href="../../de/d9e/agent_8h.html#ab6f30023e614de4ebf53190a7ffacae0">AGENT_STATUS_TYPES</a>(<a class="code" href="../../d6/d2b/agent_8c.html#af00e53d4e298dc1c2dea2296c8514cf7">SELECT_STRING</a>) }</div>
<div class="ttc" id="aagent_8c_html_af00e53d4e298dc1c2dea2296c8514cf7"><div class="ttname"><a href="../../d6/d2b/agent_8c.html#af00e53d4e298dc1c2dea2296c8514cf7">SELECT_STRING</a></div><div class="ttdeci">#define SELECT_STRING(passed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d2b/agent_8c_source.html#l00109">agent.c:109</a></div></div>
<div class="ttc" id="aagent_8h_html_ab6f30023e614de4ebf53190a7ffacae0"><div class="ttname"><a href="../../de/d9e/agent_8h.html#ab6f30023e614de4ebf53190a7ffacae0">AGENT_STATUS_TYPES</a></div><div class="ttdeci">#define AGENT_STATUS_TYPES(apply)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d9e/agent_8h_source.html#l00050">agent.h:50</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d6/d2b/agent_8c_source.html#l00110">110</a> of file <a class="el" href="../../d6/d2b/agent_8c_source.html">agent.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_dc96eb697a66e01ba190c271f9e8ccc9.html">scheduler</a></li><li class="navelem"><a class="el" href="../../dir_996c7118294fd09b8484818795181f68.html">agent</a></li><li class="navelem"><a class="el" href="../../d6/d2b/agent_8c.html">agent.c</a></li>
    <li class="footer">Generated on Wed Oct 29 2025 10:31:31 for FOSSology by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
