<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FOSSology: src/lib/php/common-scheduler.php File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../fossology-logo.gif"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FOSSology
   &#160;<span id="projectnumber">4.6.0-rc1</span>
   </div>
   <div id="projectbrief">Open Source License Compliance by Open Source Software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d2/d0a/common-scheduler_8php.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">common-scheduler.php File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Core functions for communicating with the scheduler (v2)  
<a href="#details">More...</a></p>

<p><a href="../../d2/d0a/common-scheduler_8php_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac0a5fc8a59481b487d3845225cb91a8f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d0a/common-scheduler_8php.html#ac0a5fc8a59481b487d3845225cb91a8f">fo_scheduler_connect</a> ($IPaddr='', $Port='', &amp;$ErrorMsg=&quot;&quot;)</td></tr>
<tr class="memdesc:ac0a5fc8a59481b487d3845225cb91a8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to the scheduler.  <a href="../../d2/d0a/common-scheduler_8php.html#ac0a5fc8a59481b487d3845225cb91a8f">More...</a><br /></td></tr>
<tr class="separator:ac0a5fc8a59481b487d3845225cb91a8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90283c6e2ab3588810d80b802b4a6a84"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d0a/common-scheduler_8php.html#a90283c6e2ab3588810d80b802b4a6a84">fo_scheduler_read</a> ($SchedObj, $MaxSize=2048)</td></tr>
<tr class="memdesc:a90283c6e2ab3588810d80b802b4a6a84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the scheduler socket.  <a href="../../d2/d0a/common-scheduler_8php.html#a90283c6e2ab3588810d80b802b4a6a84">More...</a><br /></td></tr>
<tr class="separator:a90283c6e2ab3588810d80b802b4a6a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ca402426b8b7ae9f2c35bc2ffee54f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d0a/common-scheduler_8php.html#a2ca402426b8b7ae9f2c35bc2ffee54f0">fo_scheduler_write</a> ($SchedObj, $msg)</td></tr>
<tr class="memdesc:a2ca402426b8b7ae9f2c35bc2ffee54f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to the scheduler socket.  <a href="../../d2/d0a/common-scheduler_8php.html#a2ca402426b8b7ae9f2c35bc2ffee54f0">More...</a><br /></td></tr>
<tr class="separator:a2ca402426b8b7ae9f2c35bc2ffee54f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fdfe85a782a08a8ca58b095d00528bc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d0a/common-scheduler_8php.html#a2fdfe85a782a08a8ca58b095d00528bc">fo_scheduler_close</a> ($SchedObj)</td></tr>
<tr class="memdesc:a2fdfe85a782a08a8ca58b095d00528bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the scheduler connection (socket).  <a href="../../d2/d0a/common-scheduler_8php.html#a2fdfe85a782a08a8ca58b095d00528bc">More...</a><br /></td></tr>
<tr class="separator:a2fdfe85a782a08a8ca58b095d00528bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a560079297e8e62eb16c35123285b795e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d0a/common-scheduler_8php.html#a560079297e8e62eb16c35123285b795e">fo_communicate_with_scheduler</a> ($input, &amp;$output, &amp;$error_msg)</td></tr>
<tr class="memdesc:a560079297e8e62eb16c35123285b795e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Communicate with scheduler, send commands to the scheduler, then get the output.  <a href="../../d2/d0a/common-scheduler_8php.html#a560079297e8e62eb16c35123285b795e">More...</a><br /></td></tr>
<tr class="separator:a560079297e8e62eb16c35123285b795e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf122959f11fe85f823b041f0fffa62b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d0a/common-scheduler_8php.html#aaf122959f11fe85f823b041f0fffa62b">GetRunnableJobList</a> ()</td></tr>
<tr class="memdesc:aaf122959f11fe85f823b041f0fffa62b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get runnable job list, the process is below:  <a href="../../d2/d0a/common-scheduler_8php.html#aaf122959f11fe85f823b041f0fffa62b">More...</a><br /></td></tr>
<tr class="separator:aaf122959f11fe85f823b041f0fffa62b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Core functions for communicating with the scheduler (v2) </p>
<dl class="section version"><dt>Version</dt><dd>2 </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d2/d0a/common-scheduler_8php_source.html">common-scheduler.php</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a560079297e8e62eb16c35123285b795e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a560079297e8e62eb16c35123285b795e">&#9670;&nbsp;</a></span>fo_communicate_with_scheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fo_communicate_with_scheduler </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$error_msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Communicate with scheduler, send commands to the scheduler, then get the output. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramtype">string</td><td class="paramname">$input</td><td><p class="starttd">The command that you want to send to the scheduler.</p>
<p class="endtd">Now the commands include:</p><ul>
<li>stop</li>
<li>pause &lt;job_id&gt;</li>
<li>agents</li>
<li>reload</li>
<li>status</li>
<li>status &lt;job_id&gt;</li>
<li>restart &lt;job_id&gt;</li>
<li>verbose &lt;level&gt;</li>
<li>verbose &lt;job_id&gt; &lt;level&gt;</li>
<li>database</li>
<li>priority &lt;job_id&gt; &lt;level&gt; </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramtype">string</td><td class="paramname">&amp;$output</td><td>Save the output from the scheduler, when received, that means this communication with the scheduler is over </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramtype">string</td><td class="paramname">&amp;$error_msg</td><td>Save the error message</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d0a/common-scheduler_8php_source.html#l00120">120</a> of file <a class="el" href="../../d2/d0a/common-scheduler_8php_source.html">common-scheduler.php</a>.</p>

</div>
</div>
<a id="a2fdfe85a782a08a8ca58b095d00528bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fdfe85a782a08a8ca58b095d00528bc">&#9670;&nbsp;</a></span>fo_scheduler_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fo_scheduler_close </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$SchedObj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close the scheduler connection (socket). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">resource</td><td class="paramname">$SchedObj</td><td>Scheduler object (currently the socket) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d0a/common-scheduler_8php_source.html#l00090">90</a> of file <a class="el" href="../../d2/d0a/common-scheduler_8php_source.html">common-scheduler.php</a>.</p>

</div>
</div>
<a id="ac0a5fc8a59481b487d3845225cb91a8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0a5fc8a59481b487d3845225cb91a8f">&#9670;&nbsp;</a></span>fo_scheduler_connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fo_scheduler_connect </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$IPaddr</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$Port</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$ErrorMsg</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connect to the scheduler. </p>
<p>The scheduler IP address and port are read from fossology.conf. But they may be overridden with the optional parameters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramtype">string</td><td class="paramname">$IPaddr</td><td>Optional IP address, default is 127.0.0.1 </td></tr>
    <tr><td class="paramdir"></td><td class="paramtype">int</td><td class="paramname">$Port</td><td>Optional port, default is 5555 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramtype">string</td><td class="paramname">&amp;$ErrorMsg</td><td>The error message is stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Scheduler object or false if failure to connect. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Currently returned object is the socket used to communicate with the scheduler. However, it is highly discouraged to use it directly instead of through the functions in this file in case we need to keep track of other data associated with a connection. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d0a/common-scheduler_8php_source.html#l00031">31</a> of file <a class="el" href="../../d2/d0a/common-scheduler_8php_source.html">common-scheduler.php</a>.</p>

</div>
</div>
<a id="a90283c6e2ab3588810d80b802b4a6a84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90283c6e2ab3588810d80b802b4a6a84">&#9670;&nbsp;</a></span>fo_scheduler_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fo_scheduler_read </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$SchedObj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$MaxSize</em> = <code>2048</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the scheduler socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">resource</td><td class="paramname">$SchedObj</td><td>Scheduler object (currently the socket) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$MaxSize</td><td>Optional max read size, default is 2048</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Message from scheduler </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d0a/common-scheduler_8php_source.html#l00062">62</a> of file <a class="el" href="../../d2/d0a/common-scheduler_8php_source.html">common-scheduler.php</a>.</p>

</div>
</div>
<a id="a2ca402426b8b7ae9f2c35bc2ffee54f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ca402426b8b7ae9f2c35bc2ffee54f0">&#9670;&nbsp;</a></span>fo_scheduler_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fo_scheduler_write </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$SchedObj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write to the scheduler socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">resource</td><td class="paramname">$SchedObj</td><td>Scheduler object (currently the socket) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$msg</td><td>Message to write to scheduler</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes successfully written or false on failure. The error code can be retrieved with socket_last_error() and passed to socket_strerror() for a text explanation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d0a/common-scheduler_8php_source.html#l00078">78</a> of file <a class="el" href="../../d2/d0a/common-scheduler_8php_source.html">common-scheduler.php</a>.</p>

</div>
</div>
<a id="aaf122959f11fe85f823b041f0fffa62b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf122959f11fe85f823b041f0fffa62b">&#9670;&nbsp;</a></span>GetRunnableJobList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GetRunnableJobList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get runnable job list, the process is below: </p>
<ol type="1">
<li>Send command 'status'to scheduler</li>
<li>The scheduler return status of all scheduled jobs</li>
<li>Retrieve the job list</li>
<li>Return the job list</li>
</ol>
<dl class="section return"><dt>Returns</dt><dd>An array, the runnable job list the array is like: Array(1, 2, 3, .., i), sorted, if no jobs, return nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d0a/common-scheduler_8php_source.html#l00171">171</a> of file <a class="el" href="../../d2/d0a/common-scheduler_8php_source.html">common-scheduler.php</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_c85d3e3c5052e9ad9ce18c6863244a25.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_b8cf88eb8559e34a0e5806f5124fe967.html">php</a></li><li class="navelem"><a class="el" href="../../d2/d0a/common-scheduler_8php.html">common-scheduler.php</a></li>
    <li class="footer">Generated on Wed Oct 29 2025 10:31:31 for FOSSology by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
